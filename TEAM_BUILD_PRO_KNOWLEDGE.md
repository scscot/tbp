# Team Build Pro - Comprehensive Knowledge Base

**Last Updated**: 2025-12-02
**Purpose**: Persistent knowledge base for AI assistants across sessions

---

## ğŸŒ Team Build Pro Ecosystem

The Team Build Pro ecosystem is a comprehensive, interconnected network of digital properties designed to drive app downloads and user acquisition. Each component serves a specific purpose in the customer journey, working together to convert prospects into paying subscribers.

### Ecosystem Components

| Property | URL | Purpose |
|----------|-----|---------|
| **Main Website (EN)** | https://teambuildpro.com | Primary landing page, SEO hub, conversion funnel |
| **Spanish Website** | https://es.teambuildpro.com | Spanish-speaking market acquisition |
| **Portuguese Website** | https://pt.teambuildpro.com | Brazilian/Portuguese market acquisition |
| **German Website** | https://de.teambuildpro.com | German-speaking market acquisition |
| **iOS App** | https://apps.apple.com/us/app/id6751211622 | iPhone/iPad distribution |
| **Android App** | https://play.google.com/store/apps/details?id=com.scott.ultimatefix | Android distribution |
| **Author Website** | https://www.stephenscott.us | Thought leadership, book sales, credibility |
| **Legacy Brand** | https://www.teambuildingproject.com | Historical brand, redirects to main site |

### Ecosystem Synergy & Conversion Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        DISCOVERY CHANNELS                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Email Campaigns â†’ SEO/Blog â†’ Social Media â†’ Author Website â†’ Referralsâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      WEBSITE ECOSYSTEM                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  teambuildpro.com â—„â”€â”€â–º es.teambuildpro.com â—„â”€â”€â–º pt.teambuildpro.com   â”‚
â”‚         â”‚                      â”‚                        â”‚               â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º de.teambuildpro.com â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚         â”‚                      â”‚                        â”‚               â”‚
â”‚    120+ Company           Localized              Localized             â”‚
â”‚    Landing Pages       Content (ES/PT/DE)     Content (ES/PT/DE)      â”‚
â”‚         â”‚                      â”‚                        â”‚               â”‚
â”‚    Blog (8 posts)         Blog (8 posts each)   Blog (8 posts each)   â”‚
â”‚         â”‚                      â”‚                        â”‚               â”‚
â”‚    FAQ/Books              FAQ/Books              FAQ/Books             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        APP STORES                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           iOS App Store  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  Google Play Store       â”‚
â”‚                          â”‚                                             â”‚
â”‚                          â–¼                                             â”‚
â”‚                   30-Day Free Trial                                    â”‚
â”‚                          â”‚                                             â”‚
â”‚                          â–¼                                             â”‚
â”‚                  $4.99/month Subscription                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### How Each Component Drives Downloads

**1. Main Website (teambuildpro.com)**
- Primary SEO target with 120+ company-specific landing pages
- Dynamic FAQ filtering for prospects vs professionals
- Blog content targeting "AI recruiting" and "direct sales" keywords
- Hero animation and CTA buttons directing to app stores
- Trust signals: privacy policy, terms, professional design

**2. Multilingual Websites (ES/PT/DE)**
- Capture Spanish, Portuguese, and German-speaking markets (Brazil, Latin America, Spain, Germany, Austria, Switzerland)
- Full content parity with English site
- Language-specific referral links from app share screen
- SEO-optimized with hreflang tags for international ranking

**3. Stephen Scott Author Website (stephenscott.us)**
- Establishes creator credibility through 13 published books
- Podcast presence builds thought leadership
- Cross-links to Team Build Pro app from book pages (especially AI/MLM books)
- Professional bio builds trust for app purchase decisions
- Dedicated blog with AI-powered content generation (`scripts/generate-sscott-blog.js`)
- Books like "How to Grow Your Network Marketing Business Using AI" link directly to Team Build Pro as the implementation tool
- Author website blog posts can reference and link to Team Build Pro features
- Bidirectional SEO benefit: author credibility boosts app trust, app success boosts author authority

**4. Company Landing Pages (120+ pages)**
- Target long-tail keywords: "AI recruiting for [Company Name]"
- Each page customized for specific direct sales companies
- Captures search traffic from professionals in specific companies
- All pages link to app store downloads

**5. Blog Content Strategy**
- Twice-weekly automated publishing (Mon/Thu)
- Topics: AI recruiting, direct sales best practices, industry trends
- Available in EN, ES, PT, DE for global reach (4 languages)
- Each post includes app download CTAs

**6. Email Campaign Integration**
- Cold email to 5,500+ direct sales professionals
- 30.9% open rate (2x industry average)
- Drives traffic to landing page â†’ app downloads
- Mailgun infrastructure with detailed analytics

**7. Legacy Brand (teambuildingproject.com)**
- Historical domain from earlier brand iteration
- Configured with redirects to teambuildpro.com
- Preserves any existing backlinks for SEO value

### Ecosystem Metrics & KPIs

| Metric | Current Value | Target |
|--------|---------------|--------|
| Email Open Rate | 30.9% | 25%+ |
| Email Click Rate | 5.5% | 3%+ |
| Website Languages | 4 (EN, ES, PT, DE) | 4 |
| Blog Posts (per language) | 8 | 15+ |
| Company Landing Pages | 120+ | 150+ |
| App Languages | 4 (EN, ES, PT, DE) | 4 |

### Cross-Linking Strategy

All ecosystem components are interconnected:
- **Website â†’ App Stores**: Direct download links on every page
- **App â†’ Websites**: Share screen generates language-specific referral URLs
- **Author Site â†’ App**: Book pages link to Team Build Pro as the "tool that implements the strategies"
- **Author Site Blog â†’ TBP Blog**: Topic coordination, cross-referencing for SEO authority
- **Email â†’ Website â†’ App**: Landing page routing for analytics and retargeting
- **Blog â†’ App**: Every post includes "Get the App" CTA sections
- **Company Pages â†’ App**: Tailored messaging for each company's audience

### Stephen Scott Author Site Integration

The stephenscott.us website serves as the credibility and thought leadership hub:
- **Book Catalog**: 13 books with 5 specifically about AI/MLM that reference Team Build Pro
- **MLM AI Book Series**: Available in English, Spanish, Portuguese, German, Hindi, Japanese
- **Blog**: Separate blog generation system (`scripts/generate-sscott-blog.js`) for author-specific content
- **Podcast Page**: Establishes authority through media appearances
- **Contact Integration**: Cloud Function (submitStephenScottContact) for lead capture
- **SEO Synergy**: Author domain authority supports Team Build Pro app credibility

---

## ğŸ¯ Core Product Identity

### What is Team Build Pro?
**Team Build Pro is an AI Downline Builder** - a professional software tool (NOT a business opportunity or MLM company) that helps direct sales professionals build, manage, and track their downline before and during their business journey.

### Key Differentiator
The world's first AI-powered platform that lets **prospects pre-build their teams BEFORE joining a business opportunity**, creating momentum from Day 1 and eliminating the cold-start problem that causes 75% of recruits to quit in their first year.

---

## ğŸ“Š Critical Statistics

- **75% of recruits quit in their first year** (primary pain point)
- **16 pre-written messages** (8 for recruiting prospects + 8 for existing business partners)
- **24/7 AI Coach** for instant recruiting guidance in 4 languages
- **4 languages supported**: English, Spanish (EspaÃ±ol), Portuguese (PortuguÃªs), German (Deutsch)
- **4 direct sponsors + 20 total downline members** = qualification milestones
- **120+ countries supported** with timezone-aware features
- **100+ direct sales companies** compatible
- **$4.99/month** after 30-day free trial
- **70% performance improvement** through client-side caching
- **30.9% email open rate** - 2x industry average for cold email campaigns

---

## ğŸ—ï¸ Technical Architecture

### Platform
- **Frontend**: Flutter (Dart) for iOS and Android
- **Backend**: Firebase (Firestore, Cloud Functions v2, Authentication, Remote Config)
- **Functions**: 50+ Cloud Functions handling real-time operations
- **Hosting**: Firebase Hosting for web properties
- **Email**: Mailgun for all email delivery (campaigns and launch announcements)

### Key Directories
```
/Users/sscott/tbp/
â”œâ”€â”€ lib/                    # Flutter app code
â”‚   â”œâ”€â”€ screens/           # UI screens
â”‚   â”œâ”€â”€ widgets/           # Reusable components
â”‚   â”œâ”€â”€ services/          # Business logic (auth, IAP, network, FCM)
â”‚   â””â”€â”€ models/            # Data models
â”œâ”€â”€ functions/             # Firebase Cloud Functions (Node.js)
â”œâ”€â”€ scripts/               # Automation scripts
â”‚   â”œâ”€â”€ generate-ai-blog.js  # AI blog generation (Claude CLI)
â”‚   â””â”€â”€ generate-blog.js     # Legacy blog generation
â”œâ”€â”€ .github/workflows/     # GitHub Actions automation
â”‚   â””â”€â”€ weekly-blog.yml    # Twice-weekly blog automation (Mon/Thu 10am PST)
â”œâ”€â”€ web/                   # Public website files (English)
â”‚   â”œâ”€â”€ index.html        # Homepage
â”‚   â”œâ”€â”€ faq.html          # FAQ with dynamic filtering
â”‚   â”œâ”€â”€ books.html        # Books landing page
â”‚   â”œâ”€â”€ companies/        # Company-specific recruiting guides (120+ pages)
â”‚   â””â”€â”€ blog/             # Blog posts (8 articles)
â”œâ”€â”€ web-es/                # Spanish website (es.teambuildpro.com)
â”‚   â”œâ”€â”€ index.html        # Spanish homepage
â”‚   â”œâ”€â”€ faq.html          # Spanish FAQ
â”‚   â”œâ”€â”€ books.html        # Spanish books page
â”‚   â”œâ”€â”€ blog/             # Spanish blog (8 translated posts)
â”‚   â”œâ”€â”€ sitemap.xml       # Spanish sitemap
â”‚   â””â”€â”€ robots.txt        # Spanish search engine directives
â”œâ”€â”€ web-pt/                # Portuguese website (pt.teambuildpro.com)
â”‚   â”œâ”€â”€ index.html        # Portuguese homepage
â”‚   â”œâ”€â”€ faq.html          # Portuguese FAQ
â”‚   â”œâ”€â”€ books.html        # Portuguese books page
â”‚   â”œâ”€â”€ blog/             # Portuguese blog (8 translated posts)
â”‚   â”œâ”€â”€ sitemap.xml       # Portuguese sitemap
â”‚   â””â”€â”€ robots.txt        # Portuguese search engine directives
â”œâ”€â”€ web-de/                # German website (de.teambuildpro.com)
â”‚   â”œâ”€â”€ index.html        # German homepage (3x2 screenshot grid)
â”‚   â”œâ”€â”€ faq.html          # German FAQ
â”‚   â”œâ”€â”€ books.html        # German books page
â”‚   â”œâ”€â”€ blog/             # German blog (8 translated posts)
â”‚   â”œâ”€â”€ sitemap.xml       # German sitemap
â”‚   â””â”€â”€ robots.txt        # German search engine directives
â”œâ”€â”€ sscott/                # Stephen Scott author website (stephenscott.us)
â”‚   â”œâ”€â”€ public/           # Author site pages (migrated from Dreamhost to Firebase)
â”‚   â”‚   â”œâ”€â”€ index.html   # Author homepage
â”‚   â”‚   â”œâ”€â”€ books.html   # Author books catalog
â”‚   â”‚   â”œâ”€â”€ books/       # 13 individual book pages
â”‚   â”‚   â”œâ”€â”€ podcasts.html # Podcast listings
â”‚   â”‚   â””â”€â”€ blog.html    # Author blog
â”‚   â””â”€â”€ scripts/         # Build automation scripts
â”œâ”€â”€ analytics/             # Analytics workspace (GA4 + Mailgun)
â”‚   â”œâ”€â”€ fetch-combined-analytics.js  # Combined reporting
â”‚   â”œâ”€â”€ fetch-ga4-data.js           # Google Analytics 4 data
â”‚   â””â”€â”€ package.json                # Analytics dependencies
â””â”€â”€ documents/            # Documentation and metadata
```

### Critical Systems

**1. Firebase UID Architecture**
- System uses Firebase UIDs throughout (NOT UUIDs)
- All `upline_refs` arrays contain Firebase UIDs
- Sponsor resolution converts referral codes to Firebase UIDs

**2. Subscription Management**
- iOS: App Store Server-to-Server notifications
- Android: Google Play Real-Time Developer Notifications
- States: trial, active, expired, cancelled, paused, on_hold
- Grace period handling for expired/cancelled states

**3. FCM Notification System**
- Three-tier token resolution (field â†’ array[0] â†’ subcollection)
- Milestone notifications with idempotent IDs
- Helper vs Trigger modes (environment variable controlled)

**4. Referral System**
- `?new=ABC` = Prospect view (considering joining referrer's opportunity)
- `?ref=ABC` = Professional view (existing team member)
- Referral codes map to Firebase UIDs via `referralCodes` collection
- Language-specific domains: es.teambuildpro.com (Spanish), pt.teambuildpro.com (Portuguese), de.teambuildpro.com (German)
- Share screen uses language selection to route to appropriate domain

---

## ğŸ’¬ Messaging & Positioning

### Value Propositions

**For Prospects** (people considering joining a business opportunity):
- Pre-build your team BEFORE investing
- Start Day 1 with momentum, not from zero
- Avoid the 75% first-year dropout fate
- Build confidence with AI-powered tools
- Risk-free 30-day trial

**For Professionals** (current direct sales people):
- Give prospects AI recruiting tools before they join YOUR business
- Eliminate cold-start failures
- True duplication with AI Coach for entire team
- Perpetual recruiting engine that feeds your organization
- Works with any direct sales company

### Key Messaging Points
1. **NOT pitching a business opportunity** - it's the tool that fuels the one you have
2. **Perpetual recruiting engine** - continues working after prospects join
3. **16 pre-written messages** eliminate "what do I say?" anxiety
4. **24/7 AI Coach** provides instant guidance
5. **Company-agnostic** - works with 100+ companies
6. **Pre-building eliminates cold starts** - the #1 reason people quit

### Language to Avoid
- âŒ "Proven" or "prove" (implies prospects must prove worthiness)
- âŒ "Two separate downlines" (it's ONE continuous downline)
- âŒ "90% quit rate" (accurate stat is 75%)
- âŒ Generic "AI system" (be specific: 16 messages + AI Coach)

---

## ğŸŒ Website Structure

### Multi-Language Website Architecture

#### Hosting Structure (5 Sites)
- **English**: teambuildpro.com (web/) - Primary site
- **Spanish**: es.teambuildpro.com (web-es/) - Complete Spanish translation
- **Portuguese**: pt.teambuildpro.com (web-pt/) - Complete Portuguese translation
- **German**: de.teambuildpro.com (web-de/) - Complete German translation
- **Author**: stephenscott.us (sscott/) - Stephen Scott author website (migrated from Dreamhost)
- **Firebase Hosting**: Five separate targets (main, es, pt, de, sscott) with individual configs

#### Language Switcher Implementation
- **Location**: Top-right of header on all pages
- **Functionality**: Switches between EN/ES/PT/DE versions
- **Query String Preservation**: Maintains `?new=` and `?ref=` parameters across language switches
- **Mobile Optimized**: Responsive positioning for all screen sizes
- **Smart Routing**: Directs to corresponding page in target language

#### Complete Content Parity (EN, ES, PT, DE)
All four main sites have identical structure:
- Homepage with hero animation
- FAQ page (8 questions)
- Books landing page with localized covers
- Blog index with 8 translated posts
- Privacy policy
- Terms of service
- Contact form
- Sitemap.xml for SEO
- Robots.txt for search engine directives

#### SEO Optimization
- **Hreflang Tags**: Cross-reference all language versions (EN/ES/PT/DE)
- **Localized Sitemaps**: Comprehensive page listing for each site
- **Robots.txt**: Custom directives per language
- **Meta Tags**: Language-specific titles and descriptions
- **Canonical URLs**: Proper canonical linking across languages

### Dynamic FAQ System (English site)
- **URL Parameter Detection**: `?new=` = Prospect view, otherwise = Professional view
- **Audience Filtering**: Uses `data-audience` attributes (prospect, professional, both)
- **Three Filter Systems**: Audience + Category dropdown + Search (unified)
- **SEO Optimization**: Dynamic meta tags based on audience type

### Key Pages (English - web/)
- `/` - Homepage with hero animation
- `/faq.html` - Dynamic FAQ (audience-aware, 8 questions)
- `/books.html` - Books landing page with AI/MLM book covers
- `/blog.html` - Blog index
- `/blog/` - 8 blog posts:
  - ai-automation-transforms-direct-sales.html
  - ai-recruiting-best-practices-2025.html
  - ai-recruiting-platforms-failing-direct-sales.html
  - qualify-new-recruits-30-days.html
  - team-build-pro-november-2025-update.html
  - young-living-recruiting-strategies.html
  - ai-network-marketing-corporate-field-leaders-use.html
  - use-ai-mlm-recruiting-without-losing-human-touch.html
- `/companies.html` - 120+ company-specific recruiting guides
- `/companies/ai-recruiting-[company].html` - Individual company pages
- `/contact_us.html` - Contact form
- `/delete-account.html` - Account deletion (App Store requirement)
- `/privacy_policy.html` - Privacy policy
- `/terms_of_service.html` - Terms of service
- `/sitemap.xml` - Comprehensive sitemap
- `/robots.txt` - Search engine directives

### Spanish Site (web-es/ - es.teambuildpro.com)
- `/` - Spanish homepage with hero animation
- `/faq.html` - Spanish FAQ (8 questions with accordion)
- `/books.html` - Spanish books page (MLM-Cover-ES.jpg)
- `/blog.html` - Spanish blog index
- `/blog/` - 8 translated blog posts (same titles as EN)
- `/companies.html` - Company recruiting guides index (114 companies with pagination)
- `/companies/` - 114 company-specific recruiting guides in Spanish
- `/contact_us.html` - Spanish contact form
- `/privacy_policy.html` - Spanish privacy policy
- `/terms_of_service.html` - Spanish terms of service
- `/sitemap.xml` - Spanish sitemap with hreflang tags (includes all company pages)
- `/robots.txt` - Spanish search directives

### Portuguese Site (web-pt/ - pt.teambuildpro.com)
- `/` - Portuguese homepage with hero animation
- `/faq.html` - Portuguese FAQ (8 questions with accordion)
- `/books.html` - Portuguese books page (MLM-Cover-BR.jpg)
- `/blog.html` - Portuguese blog index
- `/blog/` - 8 translated blog posts (same titles as EN)
- `/companies.html` - Company recruiting guides index (39 companies with pagination)
- `/companies/` - 39 company-specific recruiting guides in Portuguese
- `/contact_us.html` - Portuguese contact form
- `/privacy_policy.html` - Portuguese privacy policy
- `/terms_of_service.html` - Portuguese terms of service
- `/sitemap.xml` - Portuguese sitemap with hreflang tags (includes all company pages)
- `/robots.txt` - Portuguese search directives

### German Site (web-de/ - de.teambuildpro.com)
- `/` - German homepage with hero animation (3x2 screenshot grid layout)
- `/faq.html` - German FAQ (8 questions with accordion)
- `/books.html` - German books page (MLM-Cover-DE.jpg)
- `/blog.html` - German blog index
- `/blog/` - 8 translated blog posts (same titles as EN)
- `/companies.html` - Company recruiting guides index (20 companies with pagination)
- `/companies/` - 20 company-specific recruiting guides in German
- `/contact_us.html` - German contact form
- `/claim.html` - German claim/verification page
- `/privacy_policy.html` - German privacy policy (Datenschutzrichtlinie)
- `/terms_of_service.html` - German terms of service (Nutzungsbedingungen)
- `/sitemap.xml` - German sitemap with hreflang tags (includes all company pages)
- `/robots.txt` - German search directives

### Stephen Scott Author Website (sscott/ - stephenscott.us)
- `/` - Author homepage (professional portfolio)
- `/about.html` - About Stephen Scott (253 lines)
- `/books.html` - Author books catalog (13 books)
- `/books/[book-slug].html` - Individual book pages:
  - ai-beginners-guide-2024-2025.html
  - ai-your-gateway-to-a-better-life.html
  - breaking-through-barriers.html
  - divine-conversations.html
  - grow-your-network-marketing-business-using-ai.html
  - mlm-ai-espanol.html, mlm-ai-german.html, mlm-ai-hindi.html, mlm-ai-japanese.html, mlm-ai-portugues.html
  - stop-sabotaging-your-life.html
  - the-art-of-mastering-fear-and-uncertainty.html
  - thrive-within.html
- `/podcasts.html` - Podcast listings (425 lines)
- `/blog.html` - Author blog index
- `/contact.html` - Author contact form (Cloud Function: submitStephenScottContact)
- `/404.html` - Custom error page
- `/sitemap.xml` - Author site sitemap (122 lines)

### SEO & Meta Tags
- Title: "AI Downline Builder - Recruit Smarter, Build Faster"
- Description: "Recruit smarter & empower your downline with AI. Pre-written messages, 24/7 coaching, real-time tracking. Free 30-day trial. $4.99/mo after."
- Focus keywords: AI downline builder, pre-build teams, direct sales recruiting

---

## ğŸ¤– Bot Detection & Traffic Analysis

### Comprehensive Bot Filtering System
- **Implementation**: JavaScript bot detection across all sites (EN, ES, PT, DE, Author)
- **Detection Method**: Browser fingerprinting, behavior analysis, known bot signatures
- **Scripts**: add-bot-detection.js, fix-bot-detection.js deployed site-wide
- **Purpose**: Filter bot traffic from analytics for accurate user metrics

### Traffic Analysis Tools

**analyze-boardman-traffic.js** (169 lines)
- Investigates suspicious traffic from Boardman, OR
- Browser/OS fingerprinting analysis
- Pattern detection for bot identification
- GA4 integration for comprehensive reporting

**analyze-city-traffic.js** (217 lines)
- General city-level traffic monitoring
- Traffic quality assessment
- Anomaly detection across geographic regions
- Identifies patterns of automated access

### Integration
- Bot detection runs on page load
- Flags bot traffic before analytics tracking
- Preserves clean user metrics in GA4
- Continuously updated bot signature database

---

## ğŸ“Š Analytics Infrastructure

### Analytics Workspace (analytics/ directory)
- **Purpose**: Separate npm workspace for analytics tools
- **Dependencies**: Google Analytics Data API v1, Mailgun API integration
- **Environment**: Service account authentication (ga4-service-account.json)

### Core Analytics Functions

**fetch-combined-analytics.js** (511 lines)
- Combined GA4 + Mailgun reporting system
- Cross-references website traffic with email campaign performance
- Generates comprehensive analytics reports
- Correlates email engagement with website visits

**fetch-ga4-data.js** (384 lines)
- Google Analytics 4 data extraction
- Automated report generation
- Traffic source analysis
- User behavior metrics
- Conversion tracking

**count-unsent-emails.js** (33 lines)
- Email campaign queue monitoring
- Real-time unsent email counts
- Campaign progress tracking

### Reporting Capabilities
- Daily/weekly/monthly traffic reports
- Email campaign performance metrics
- Geographic traffic distribution
- User engagement analysis
- Conversion funnel tracking
- Bot vs. human traffic differentiation

---

## ğŸ“± App Store Listing

**App Name**: Team Build Pro: Direct Sales
**App ID (iOS)**: 6751211622
**Package ID (Android)**: com.scott.ultimatefix
**Status**: LIVE on both iOS App Store and Google Play Store (as of Nov 2025)

### App Store URLs
- **iOS**: https://apps.apple.com/us/app/id6751211622 (simplified URL without app name slug)
- **Android**: https://play.google.com/store/apps/details?id=com.scott.ultimatefix
- **Website**: https://teambuildpro.com

### Key Features (as listed)
1. AI-Powered Recruiting Coach
2. 16 Pre-Written Messages (8 for prospects + 8 for partners)
3. Downline Qualification Tracking
4. Secure Team Messaging
5. Real-Time Analytics
6. Company-Agnostic Platform

---

## ğŸ”§ Development Workflow

### Flutter Commands
```bash
flutter run --release          # Run release build
flutter build ios --release    # Build iOS release
flutter build appbundle        # Build Android App Bundle
flutter clean                  # Clean build cache
```

### Firebase Commands
```bash
firebase deploy --only hosting              # Deploy website
firebase deploy --only functions           # Deploy Cloud Functions
firebase emulators:start                   # Start local emulators
firebase functions:log                     # View function logs
```

### Git Workflow
```bash
git add . && git commit -m "message" && git push
```

---

## ğŸ“§ Email Campaigns

### Campaign Architecture Overview

The email campaign system consists of two parallel campaigns targeting different audience segments, both using the same Mailgun template with different data sources.

**Mailgun Configuration:**
- **Template Name**: `campaign`
- **Template Version**: `initial`
- **Subject Line**: `The Recruiting App Built for Direct Sales`
- **From**: `Stephen Scott <ss@mailer.teambuildpro.com>`
- **Domain**: mailer.teambuildpro.com
- **Tracking**: Opens, clicks, and delivery status enabled

### Main Campaign (Mailgun - Automated)
- **Function**: `sendHourlyEmailCampaign` in `functions/email-campaign-functions.js`
- **Tags**: `winning_combination`, `2version`
- **Schedule**: 8am, 10am, 12pm, 2pm, 4pm, 6pm PT (even hours)
- **Data Source**: Firestore `emailCampaigns/master/contacts` collection
- **Control Variable**: EMAIL_CAMPAIGN_ENABLED
- **Batch Size**: EMAIL_CAMPAIGN_BATCH_SIZE (configurable)

### Yahoo Campaign (Mailgun - Automated)
- **Function**: `sendHourlyEmailCampaignYahoo` in `functions/email-campaign-functions-yahoo.js`
- **Tags**: `yahoo_campaign`, `2version`
- **Schedule**: 7am, 9am, 11am, 1pm, 3pm, 5pm PT (odd hours, offset from main)
- **Data Source**: Firestore `emailCampaigns/master/contacts_yahoo` collection
- **Control Variable**: EMAIL_CAMPAIGN_ENABLED_YAHOO
- **Batch Size**: EMAIL_CAMPAIGN_BATCH_SIZE_YAHOO (configurable)
- **Purpose**: Separate campaign for Yahoo/AOL email addresses which require different sending patterns

### Campaign Performance (Post-Cleanup, as of Nov 27, 2025)
After cleaning invalid emails from the database, current metrics from the past 24 hours:
- **Delivered**: 54 emails
- **Failed**: 11 emails
- **Delivery Rate**: 83.1% (54 of 65 accepted)
- **Open Rate**: 20.4% (11 opens, above industry avg 15-25%)
- **Click Rate**: 0.0% (0 clicks)
- **Note**: Database was cleaned to remove invalid emails; metrics are now from verified contacts

### Android Launch Campaign (Mailgun - Automated Phase 2)
- **Function**: `sendAndroidLaunchCampaign` in `functions/email-campaign-functions.js`
- **Tags**: `android_launch`, `initial`
- **Template Version**: `initial`
- **Purpose**: Re-engage contacts sent before Nov 12, 2025 Android launch
- **Schedule**: Same as Main Campaign (8am, 10am, 12pm, 2pm, 4pm, 6pm PT)
- **Data Source**: Firestore `emailCampaigns/master/contacts` collection (resend field)
- **Control Variable**: ANDROID_CAMPAIGN_ENABLED (currently disabled)
- **Pre-marked Contacts**: 2,077 contacts marked with `resend: false` via mark-contacts-for-resend.js script
- **Status**: Ready to deploy after Phase 1 completion

### Yahoo Android Launch Campaign
- **Function**: `sendAndroidLaunchCampaignYahoo` in `functions/email-campaign-functions-yahoo.js`
- **Tags**: `yahoo_android_launch`, `initial`
- **Schedule**: 8am, 10am, 12pm, 2pm, 4pm, 6pm PT
- **Data Source**: Firestore `emailCampaigns/master/contacts_yahoo` collection (resend field)
- **Control Variable**: ANDROID_CAMPAIGN_ENABLED_YAHOO (currently disabled)

### Mailgun Event Sync (Automated Data Collection)
- **Function**: `syncMailgunEvents` in `functions/email-campaign-functions.js`
- **Purpose**: Sync Mailgun delivery/engagement data to Firestore before 24-hour log expiration
- **Schedule**: 10 minutes after each campaign window (8:10am, 10:10am, 12:10pm, 1:10pm, 3:10pm, 6:10pm PT)
- **Lookback Window**: 2 hours (captures events from previous campaign run)
- **Event Types**: delivered, failed, opened, clicked
- **Data Stored**: deliveryStatus, deliveredAt, failedAt, failureReason, openedAt, openCount, clickedAt, clickCount
- **Independent Control**: EMAIL_CAMPAIGN_SYNC_ENABLED environment variable
- **Batch Processing**: Handles up to 500 contacts per Firestore batch commit
- **API Limit**: 300 events per event type per query
- **Status**: Deployed and operational (Nov 24, 2025)

### Launch Campaign (Mailgun - Manual Trigger)
- **Function**: `sendLaunchCampaign` in `functions/sendLaunchCampaign.js`
- **Template**: `launch_campaign_mailgun.html` (simple, personal style)
- **Trigger**: HTTP POST endpoint (manual execution)
- **Data Source**: Firestore `launch_notifications` collection
- **Purpose**: One-time announcement emails to landing page signups
- **Status**: Converted from SendGrid to Mailgun (Nov 2025)

### Email Strategy Decisions
1. **Landing Page CTA** (not direct app store links):
   - Works on all devices (desktop/mobile)
   - Enables retargeting and analytics
   - Provides social proof and trust building
   - Better for cold email to MLM professionals

2. **Subtle Text Links** (not buttons):
   - Less "markety" for pitch-fatigued MLM audience
   - Builds trust through restraint
   - Stands out by NOT looking promotional
   - Proven with 30.9% open rate

3. **Personal, Simple Style**:
   - No complex hero images or heavy formatting
   - Personal tone from Stephen Scott
   - Focus on value and benefits
   - Works well with Mailgun's deliverability

### Target Audience
- Current direct sales professionals (not prospects)
- Cold email list sourced from MLM/direct sales databases
- Goal: Landing page visits â†’ App downloads â†’ Trial sign-ups â†’ Paid conversions

---

## ğŸš¨ Critical Don'ts

1. **NEVER modify these files**:
   - `secrets/` directory
   - `ios/Runner/GoogleService-Info.plist`
   - `android/app/google-services.json`
   - `lib/firebase_options.dart`
   - `functions/serviceAccountKey.json`

2. **NEVER mix Firebase UIDs with UUIDs**
   - All references must use Firebase authentication UIDs

3. **NEVER bypass unified notification system**
   - Always use `createNotificationWithPush()` function

4. **NEVER use emojis unless explicitly requested**
   - Professional tone throughout

5. **NEVER create new files unless necessary**
   - Always prefer editing existing files

6. **NEVER automatically deploy to Firebase hosting**
   - ONLY render changes locally using `open` command
   - User will handle ALL Firebase hosting deployments manually
   - Do NOT run `firebase deploy` commands

---

## ğŸ“ Learning Resources

### Documentation Files
- `/Users/sscott/tbp/CLAUDE.md` - Comprehensive development guide
- `/Users/sscott/tbp/documents/` - App Store metadata and documentation
- This file - Persistent knowledge base

### Key Source Files to Understand
- `lib/main.dart` - App initialization
- `lib/services/auth_service.dart` - Authentication
- `lib/services/network_service.dart` - Advanced caching
- `lib/screens/share_screen.dart` - 16 pre-written messages
- `lib/screens/dashboard_screen.dart` - Main dashboard with stats and action cards (responsive text handling for multilingual support)
- `lib/screens/how_it_works_screen.dart` - How It Works (fully localized in 4 languages)
- `lib/screens/platform_management_screen.dart` - Admin account creation (fully localized in 4 languages)
- `lib/widgets/biz_opp_education_modal.dart` - Business opportunity education modal
- `lib/widgets/quick_prompts_widget.dart` - AI Coach welcome screen with quick prompts
- `lib/l10n/app_*.arb` - Localization files (EN, ES, PT, DE)
- `functions/index.js` - All Cloud Functions
- `functions/email-campaign-functions.js` - Automated hourly email campaign
- `functions/sendLaunchCampaign.js` - Manual launch announcement emails
- `functions/email_templates/launch_campaign_mailgun.html` - Launch email template
- `web/faq.html` - Dynamic FAQ implementation

### Utility Scripts (functions/)
- `count-todays-emails.js` - Query Firestore for daily email send counts
- `get-mailgun-stats.js` - Query Mailgun API for delivery/engagement statistics
- `test-email.js` - Send test emails via Mailgun for campaign testing
- `reset-failed-contacts.js` - Reset failed email campaign contacts from Mailgun CSV exports
- `reset_failed_batch.js` - Batch processing for failed contact resets
- `reset_failed_contacts.js` - Alternative reset script for email campaign recovery
- `mark-contacts-for-resend.js` - Mark all contacts sent before Nov 12, 2025 for Android launch resend campaign

### Utility Scripts (scripts/)
- `generate-ai-blog.js` - AI-powered blog generation using Claude CLI
  - `--title "Title"` - Generate blog with specific title (EN, ES, PT, DE)
  - `--research` - Research mode: analyze trends and recommend topics
  - `--full-auto` - Full automation: research, generate, deploy, notify
  - `--notify-email=EMAIL` - Recipient for notification emails
  - Generates 4 language versions: English, Spanish, Portuguese, German
- `generate-blog.js` - Legacy blog generation (static template approach)

---

## ğŸ”„ Recent Major Changes (as of Nov 2025)

### Week of Nov 6
1. âœ… Updated FAQ with dynamic audience filtering (prospect vs professional)
2. âœ… Corrected message count from 8 to 16 throughout marketing materials
3. âœ… Fixed category dropdown filtering on FAQ page
4. âœ… Updated email campaign subject line and template
5. âœ… Standardized 75% quit rate statistic (was inconsistent)
6. âœ… Added "perpetual recruiting engine" messaging
7. âœ… Removed "proven/prove" language from messaging

### Week of Nov 12
8. âœ… **Google Play Store Launch**: App now LIVE on Android (completed Nov 12)
9. âœ… **Email CTA Strategy Update**: Changed from direct app store links to landing page routing
   - Updated both `email-body-only-updated.html` and `email-template-updated.html`
   - Implemented subtle text link CTA: "Learn more at TeamBuildPro.com"
   - Rationale: Better cross-device experience, enables analytics/retargeting
10. âœ… **Email Campaign Performance**: Achieving 30.9% open rate (2x industry average)
11. âœ… **Mailgun Conversion**: Converted `sendLaunchCampaign.js` from SendGrid to Mailgun
   - Created new `launch_campaign_mailgun.html` template
   - Updated function to use Mailgun API with FormData
   - Simplified personalization (uses Mailgun variable syntax)
12. âœ… **Campaign Statistics Tracking**: Created monitoring scripts
   - `count-todays-emails.js` for Firestore tracking
   - `get-mailgun-stats.js` for delivery/engagement metrics
13. âœ… **Website Updates**: Updated 115 company pages with Google Play Store link
14. âœ… **App Store URL Update**: Updated all 121 website files with new App Store URL
   - Changed from `team-build-pro-direct-sales` to `team-build-pro-ai-team-builder`
   - URL slug updated to reflect app name change in App Store Connect
   - Old URLs redirect automatically to new URLs (Apple's redirect behavior)
   - Best practice: Use current URL format for SEO and consistency

### Week of Nov 17
15. âœ… **Multilingual Screen Localization**: Fully localized How It Works and Platform Management screens
   - Added 31 new localization keys (18 for How It Works + 13 for Platform Management)
   - Full translations in EN, ES, PT, DE for both screens
   - Implemented placeholder support for dynamic content (e.g., `{bizOpp}` in Platform Management)
   - Fixed import paths and removed unnecessary null-aware operators
   - All changes verified with `flutter analyze` - no issues found
16. âœ… **Android Build v1.0.61+91**: Created new AAB with all localization changes
   - Build size: 55.6MB
   - Includes all multilingual updates for How It Works and Platform Management screens
   - Tree-shaking applied: MaterialIcons reduced by 98.9%
17. âœ… **Build Cache Cleanup**: Optimized project storage
   - Deleted Android cache directories (android/.gradle, android/build) - freed 43MB
   - Cleaned Flutter build caches via `flutter clean`
   - Project ready for fresh builds
18. âœ… **German UI Text Overflow Fixes**: Fixed multilingual text display issues
   - `lib/screens/dashboard_screen.dart`: Fixed stats card title overflow (reduced font size 18â†’16, added line height 1.2, enabled soft wrapping)
   - `lib/screens/dashboard_screen.dart`: Fixed action card title overflow (wrapped Text in Flexible widget, enabled 2-line display)
   - `lib/widgets/quick_prompts_widget.dart`: Fixed AI Coach welcome title overflow (wrapped Text in Flexible widget)
   - Verified all fixes with German locale hot reload testing
19. âœ… **Android Build v1.0.62+92**: Created AAB with German UI fixes
   - Build size: 55.6MB
   - All German text overflow issues resolved
   - Committed and pushed to GitHub with detailed commit message
20. âœ… **Major Disk Space Optimization**: Freed 14GB for iOS archive builds
   - Deleted Gradle cache: 5.5GB (`~/.gradle/caches`)
   - Deleted npm cache: 4.8GB (`~/.npm`)
   - Deleted Xcode DerivedData: 3.8GB (kept 165MB for active project)
   - Deleted CocoaPods cache: 155MB
   - Disk space improved: 7.1GB â†’ 21GB available (97% â†’ 90% capacity)
21. âœ… **iOS Build v1.0.64+94**: Prepared iOS release with debug symbols
   - Fixed localization build issue (regenerated `build/l10n_missing.txt` via `flutter gen-l10n`)
   - Successfully built iOS release with `flutter build ios --release --no-codesign`
   - Build size: 69.5MB with proper dSYM files
   - **Note**: Flutter.framework dSYM warning is a known Flutter issue and safe to ignore
     - Apple accepts submissions with this warning
     - Only Flutter's engine framework lacks dSYMs (app code has symbols)
     - Crash reporting works normally for app code
     - Thousands of Flutter apps in production with same warning

### Week of Nov 21
22. âœ… **Multi-Language Website Launch**: Complete Spanish and Portuguese websites
   - Created web-es/ (es.teambuildpro.com) and web-pt/ (pt.teambuildpro.com) directories
   - Fully localized homepages with 8 FAQ items (vs 6 on English site)
   - Fixed FAQ navigation links to point to /faq.html instead of /#faq
   - Added "View All Questions & Answers" button to both ES and PT homepages
   - Fixed FAQ accordion functionality using CSS class-based toggle
   - Contact forms with Google Analytics integration (internal IP filtering: 76.33.111.72)
   - Privacy policy and terms of service pages in both languages
   - Proper sitemap.xml files with hreflang tags for SEO

23. âœ… **Firebase Hosting Configuration**: Multi-site setup
   - Added ES and PT hosting targets to firebase.json
   - Configured cache headers: HTML (no-cache), assets (1 year)
   - Added 301 redirects for index.html â†’ root path
   - Successfully deployed both sites (157 files each)

24. âœ… **Referral System Simplification** (v1.0.67+97):
   - Removed message type targeting (&t=X parameter)
   - Implemented language-specific domain routing
   - Share screen now routes to es.teambuildpro.com or pt.teambuildpro.com based on language selection
   - Cleaner URL structure: `https://es.teambuildpro.com/?new=ABC`
   - Updated share_screen.dart to use `_buildTargetedLink()` with domain selection

25. âœ… **Backend CORS Updates**:
   - Added es.teambuildpro.com and pt.teambuildpro.com to CORS whitelist
   - Updated functions/src/referrals.ts and compiled JavaScript files
   - Ensures API access from all language-specific domains

26. âœ… **SEO Improvements**:
   - Simplified EN sitemap.xml from 100+ URLs to essential pages only
   - Added hreflang tags linking EN/ES/PT versions for proper Google indexing
   - All three sites now properly cross-reference each other for multilingual SEO

27. âœ… **Email Campaign Utility Scripts**:
   - Created reset-failed-contacts.js for recovering failed email deliveries
   - Processes Mailgun CSV exports to reset contact status in Firestore
   - Enables retry of failed email sends from campaign

### Week of Nov 24
28. âœ… **Android Launch Campaign (Phase 2)**:
   - Created `sendAndroidLaunchCampaign` function in email-campaign-functions.js
   - Created email_resend_version.html template with Android launch announcement
   - Marked 2,077 pre-Nov 12 contacts for resend via mark-contacts-for-resend.js script
   - Fixed incorrect Google Play Store URL (com.teambuildpro.app â†’ com.scott.ultimatefix)
   - Added ANDROID_CAMPAIGN_ENABLED environment variable for independent campaign control
   - Status: Ready to deploy after Phase 1 completion

29. âœ… **Mailgun Event Sync System**:
   - Created `syncMailgunEvents` function in email-campaign-functions.js
   - Automated sync of delivery/engagement data from Mailgun to Firestore
   - Runs 10 minutes after each campaign window with 2-hour lookback
   - Captures delivered, failed, opened, clicked events before 24-hour log expiration
   - Stores deliveryStatus, timestamps, counts, and failure reasons in Firestore
   - Added EMAIL_CAMPAIGN_SYNC_ENABLED environment variable
   - Successfully tested with 24-hour window to capture initial 3pm batch data (300 delivered, 15 failed, 6 opened)
   - Deployed and operational (Nov 24, 2025)

30. âœ… **Email Campaign Subject Line Update**:
   - Changed from "{{firstName}}, build your downline with AI-powered team tools"
   - To "The Recruiting App Built for Direct Sales"
   - Updated positioning aligns with new "AI Recruiting" branding
   - Removes MLM terminology that was causing spam filter issues

31. âœ… **Email Campaign Batch Size Increase**:
   - Increased from 25 emails per run to 75 emails per run
   - Daily capacity increased from 125 to 450 emails per day
   - Completion timeline reduced from ~44 days to ~8 days
   - Schedule remains 8am, 10am, 12pm, 1pm, 3pm, 6pm PT, Monday-Saturday

32. âœ… **Stephen Scott Author Website Migration to Firebase**:
   - Migrated stephenscott.us from Dreamhost to Firebase Hosting
   - Created sscott/ directory with complete website rebuild
   - 13 individual book pages with purchase links
   - Podcasts page (425 lines) with iframe embeds
   - About page (253 lines) with professional bio
   - Contact form integrated with Cloud Function (submitStephenScottContact)
   - Sitemap.xml (122 lines) for SEO
   - 301 redirects for legacy /blogs, /shop, /product URLs
   - Firebase hosting target: "sscott" pointing to sscott/public/
   - Build automation scripts in sscott/scripts/

33. âœ… **Bot Detection & Traffic Analysis System**:
   - Implemented comprehensive JavaScript bot detection across all sites
   - Created analyze-boardman-traffic.js (169 lines) for suspicious traffic investigation
   - Created analyze-city-traffic.js (217 lines) for general traffic monitoring
   - Browser fingerprinting and behavior analysis
   - Pattern detection for bot identification
   - Scripts: add-bot-detection.js, fix-bot-detection.js

34. âœ… **Analytics Infrastructure (GA4 + Mailgun Integration)**:
   - Created analytics/ workspace as separate npm project
   - fetch-combined-analytics.js (511 lines): Combined GA4 + Mailgun reporting
   - fetch-ga4-data.js (384 lines): Google Analytics 4 data extraction
   - Cross-references website traffic with email campaign performance
   - Service account authentication (ga4-service-account.json)
   - Daily/weekly/monthly reporting capabilities
   - Bot vs. human traffic differentiation

35. âœ… **Books Landing Pages for All Languages**:
   - Created books.html for English site with localized book covers
   - Created books.html for Spanish site (es.teambuildpro.com)
   - Created books.html for Portuguese site (pt.teambuildpro.com)
   - AI/MLM book catalog with purchase links
   - Consistent design across all three languages
   - SEO-optimized with proper hreflang tags

36. âœ… **Blog Expansion & Translation**:
   - 8 blog posts created for English site (web/blog/)
   - All 8 posts translated to Spanish (web-es/blog/)
   - All 8 posts translated to Portuguese (web-pt/blog/)
   - Blog index pages for all three languages
   - Topics: AI automation, recruiting best practices, platform comparisons
   - Localized meta tags and SEO optimization

37. âœ… **Language Switcher Implementation**:
   - Top-right placement on all EN/ES/PT pages
   - Preserves query string parameters (?new=, ?ref=) across language switches
   - Smart routing to corresponding pages in target language
   - Mobile-optimized responsive design
   - JavaScript-based with smooth user experience

38. âœ… **App Localization Phase 1 (60+ Translation Keys)**:
   - Created biz_opp_education_modal.dart widget for business opportunity education
   - Localized 14 Flutter screens with full translations (EN, ES, PT, DE)
   - Added 60+ new localization keys to app_*.arb files
   - Placeholder support for dynamic content (e.g., {bizOpp})
   - Database schema update: bizOppEducationShown field added to users collection
   - Fixed import paths and null-aware operators
   - Verified with flutter analyze - no issues

39. âœ… **SEO & Cross-Site Integration**:
   - Hreflang tags linking all language versions (EN/ES/PT/DE)
   - Simplified EN sitemap.xml to essential pages only
   - Complete sitemaps for ES, PT, and DE sites with cross-references
   - Robots.txt files for all five sites (EN, ES, PT, DE, stephenscott.us)
   - Proper canonical URL implementation across all sites
   - Google Analytics integration with internal IP filtering (76.33.111.72)

### Week of Nov 27
40. âœ… **New Blog Post: AI Network Marketing for Corporate & Field Leaders**:
   - Created ai-network-marketing-corporate-field-leaders-use.html for all three languages
   - English: web/blog/ai-network-marketing-corporate-field-leaders-use.html
   - Spanish: web-es/blog/ai-network-marketing-corporate-field-leaders-use.html
   - Portuguese: web-pt/blog/ai-network-marketing-corporate-field-leaders-use.html
   - Topic: How corporate executives and field leaders use AI for network marketing
   - Fully translated content (not just machine translation)

41. âœ… **ES/PT Blog Header/Footer Fixes**:
   - Fixed minimal header/footer issue on ES/PT blog posts
   - Previous: Blog posts had minimal navigation (logo only)
   - Fixed: Full navigation matching homepage (hamburger menu, mobile menu, language switcher)
   - Updated generate-ai-blog.js with proper ES/PT header/footer templates
   - All existing and new blog posts now have consistent navigation across languages

42. âœ… **Email Campaign Gmail Distribution Fix**:
   - Identified issue: gmail.com contacts had high `randomIndex` values (0.82-0.95)
   - Non-gmail contacts had low values (0.14-0.22), causing gmail to be stuck at back of queue
   - Re-randomized 1,005 unsent contacts in Firestore with `Math.random()` values
   - Verified fix: gmail addresses now evenly distributed (15 of first 20 contacts are gmail)
   - Email campaign now properly includes gmail.com addresses in each batch

43. âœ… **Automated Blog Generation Pipeline (GitHub Actions)**:
   - Created fully automated blog generation system running twice weekly
   - Schedule: Every Monday and Thursday at 10am PST (cron: '0 18 * * 1,4')
   - Workflow file: `.github/workflows/weekly-blog.yml`
   - **Pipeline stages**:
     1. Research: Claude CLI analyzes industry trends from BusinessForHome.org, Direct Selling News, social media
     2. Topic Selection: AI recommends 3-5 topics with relevance scores, selects top-scoring topic
     3. Generation: Creates blog post in EN, ES, PT, DE using generate-ai-blog.js
     4. Deploy: Auto-deploys to Firebase Hosting (all four language sites)
     5. Notify: Sends email notification via Mailgun with results
   - **New script flags added to generate-ai-blog.js**:
     - `--research`: Research mode - analyze trends and recommend topics
     - `--full-auto`: Full automation mode - research, generate, deploy, notify
     - `--notify-email=EMAIL`: Recipient for notification emails (default: scscot@gmail.com)
   - **Generated files**:
     - `scripts/blog-recommendations.json`: Research results with topic recommendations
     - `scripts/blog-response.json`: Blog generation response data
   - **Required GitHub Secrets**:
     - ANTHROPIC_API_KEY: For Claude CLI blog generation
     - MAILGUN_API_KEY: For email notifications
     - FIREBASE_SERVICE_ACCOUNT: For Firebase deployment
   - **Manual trigger**: Supports workflow_dispatch for testing
   - **Auto-commit**: Generated blog files committed back to repository by GitHub Actions bot

44. âœ… **ES/PT Blog Template UI Enhancement**:
   - Updated `generateTranslatedBlogHTML()` function in `scripts/generate-ai-blog.js`
   - ES/PT blog posts now match EN template quality with full UI elements:
     - Breadcrumb navigation (Home â†’ Blog â†’ Article)
     - Category eyebrow badge with color-coded styling
     - Improved typography with inline CSS
     - Social share buttons (Twitter, LinkedIn, Facebook)
     - App download CTA section with store badges
     - Complete header/footer matching homepage navigation
   - Regenerated existing ES/PT blog posts with updated template
   - Deployed to Firebase Hosting (es and pt targets)

45. âœ… **Blog Index Page Updates (ES/PT)**:
   - Updated `web-es/blog.html` and `web-pt/blog.html`
   - Added new blog post entries to index pages
   - Consistent card layout and styling across all three languages

46. âœ… **Sitemap Auto-Update Verification**:
   - Confirmed `generate-ai-blog.js` automatically updates sitemaps via `updateSitemap()` function
   - Updates EN sitemap (`web/sitemap.xml`)
   - Updates ES sitemap (`web-es/sitemap.xml`)
   - Updates PT sitemap (`web-pt/sitemap.xml`)
   - New blog URLs properly added with correct lastmod dates

47. âœ… **New Blog Post: AI in MLM Recruiting Without Losing Human Touch**:
   - Generated via automated pipeline
   - English: `web/blog/use-ai-mlm-recruiting-without-losing-human-touch.html`
   - Spanish: `web-es/blog/use-ai-mlm-recruiting-without-losing-human-touch.html`
   - Portuguese: `web-pt/blog/use-ai-mlm-recruiting-without-losing-human-touch.html`
   - Topic: Balancing AI automation with authentic human connection in recruiting
   - All three versions deployed with matching UI templates

### Week of Nov 28
48. âœ… **Stephen Scott Blog Generator (generate-sscott-blog.js)**:
   - Created new automated blog generation script for stephenscott.us
   - Located at: `scripts/generate-sscott-blog.js`
   - Uses Anthropic Claude API directly (not CLI)
   - **Modes**:
     - `--full-auto`: Research trends â†’ generate blog â†’ deploy â†’ email notification
     - `--research`: Analyze industry trends and save recommendations
     - `--generate "Title"`: Generate blog from specific title
   - Auto-updates blog index (`sscott/public/blog.html`) and sitemap (`sscott/public/sitemap.xml`)
   - Sends email notifications via Mailgun
   - Valid categories: Recruiting Tips, Product Updates, Tutorials

49. âœ… **Firebase cleanUrls Fix for stephenscott.us**:
   - Changed `cleanUrls: true` to `cleanUrls: false` in firebase.json for sscott target
   - Previous behavior: Firebase stripped `.html` extensions and redirected
   - Fixed behavior: URLs now serve with `.html` extensions matching sitemap
   - Important for SEO consistency between internal links, canonical URLs, and sitemap

50. âœ… **Comprehensive SEO Audit & Fixes for stephenscott.us**:
   - Fixed all internal navigation links to include `.html` extensions (20 files)
   - Fixed canonical URLs to include `.html` extensions (all pages)
   - Fixed og:url tags to include `.html` extensions (all pages)
   - Updated generate-sscott-blog.js template with `.html` extensions
   - Created missing author images for social sharing:
     - `assets/images/stephen-scott-og.jpg` (1200x630px, SS logo design)
     - `assets/images/stephen-scott-about.jpg`
     - `assets/images/stephen-scott-twitter.jpg`
   - Removed dead `generate-sitemap` script reference from sscott/package.json

51. âœ… **Comprehensive SEO Audit & Fixes for Team Build Pro Sites (web/, web-es/, web-pt/)**:
   - **web/ (English)**:
     - Fixed `books.html` canonical (had trailing slash `/books/` instead of `/books.html`)
     - Fixed inconsistent `www.` prefix in canonical/og:url tags (contact_us, privacy_policy, terms_of_service)
     - Added missing canonical tag to `faq.html`
     - Added missing canonical tag to `companies.html`
     - Fixed 114 company pages with wrong og:url path (`/learning/` â†’ `/companies/`)
   - **web-es/ (Spanish)**:
     - Added missing canonical tag to `faq.html`
   - **web-pt/ (Portuguese)**:
     - Added missing canonical tag to `faq.html`
   - All sites verified: hreflang tags, robots.txt, sitemaps, CSS/image references

52. âœ… **SEO Best Practices Documentation**:
   - Canonical URLs: Tells search engines the "official" version of a page
   - Prevents duplicate content penalties from multiple URL variations
   - Consolidates link equity to single URL
   - Controls what appears in search results
   - After SEO fixes, sitemaps should be resubmitted to Google Search Console

### Week of Nov 30
53. âœ… **German Website (web-de/) Launch**:
   - Created complete German website at de.teambuildpro.com
   - Full content translation: index.html, faq.html, books.html, blog.html, contact_us.html, claim.html
   - Legal pages: privacy_policy.html (Datenschutzrichtlinie), terms_of_service.html (Nutzungsbedingungen)
   - 8 blog posts translated to German (same slugs as EN/ES/PT)
   - Custom 3x2 grid layout for app screenshots (6 screenshots, CSS override)
   - sitemap.xml and robots.txt with proper hreflang tags
   - Firebase hosting target: "de" pointing to web-de/
   - Deployed to de.teambuildpro.com

54. âœ… **German Blog Automation Support**:
   - Modified `scripts/generate-ai-blog.js` for German (DE) support
   - Added German language name and de.teambuildpro.com base URL in translation prompts
   - Added German date formatting (de-DE locale) in updateBlogIndex and generateTranslatedBlogHTML
   - Added German category badges: RECRUITING-TIPPS, PRODUKT-UPDATES, TUTORIALS
   - Added German featured badge (EMPFOHLEN) and read more text (Artikel lesen â†’)
   - Added German "by" text (Von)
   - Added complete German localized strings for HTML generation (navigation, sharing, CTA, footer)
   - Added Step 6/7 German translation in runFullAutomation workflow
   - Updated output summary to include German file path
   - Updated `.github/workflows/weekly-blog.yml`:
     - Added web-de/blog/*.html to git add
     - Added web-de/blog.html to git add
     - Added web-de/sitemap.xml to git add
     - Added scripts/german-translation.json to git add

55. âœ… **Share Screen German Domain Routing**:
   - Modified `lib/screens/share_screen.dart` for German referral links
   - Added German domain routing in `_buildTargetedLink()` method
   - German messages now route to de.teambuildpro.com instead of teambuildpro.com
   - Pattern: `https://de.teambuildpro.com/?new=ABC` for German language selection

56. âœ… **Google Play Console Subtitles (80 chars)**:
   - Added Google Subtitle field to all App Store Description documents
   - Google Play allows 80 characters vs App Store's 30-character limit
   - Keyword-optimized subtitles for better discoverability:
     - EN: "AI-Powered MLM & Direct Sales Recruiting App | Downline Builder & Team Tracker" (79 chars)
     - ES: "App de Reclutamiento MLM y Ventas Directas con IA | Constructor de Equipo" (73 chars)
     - PT: "App de Recrutamento MLM e Vendas Diretas com IA | Construtor de Equipe" (70 chars)
     - DE: "KI-gestÃ¼tzte MLM & Direktvertrieb Recruiting-App | Downline & Team Builder" (75 chars)
   - Updated documents/App_Store_Description.md, _ES.md, _PT.md, _DE.md

57. âœ… **Android Build v1.0.70+100**:
   - Created new Android App Bundle (AAB) release
   - Build size: 53MB
   - Tree-shaking applied: MaterialIcons reduced by 98.9%
   - Ready for Google Play Console upload

58. âœ… **App Store Localizations Submitted**:
   - Submitted localizations to both Google Play Console and App Store Connect
   - German (de-DE): Team Build Pro: KI Team
   - Portuguese (pt-BR): Team Build Pro: IA Equipe
   - Spanish (es-419 Latin America): Team Build Pro: IA Equipo
   - All localized metadata: app name, subtitle/short description, full description, keywords

### Week of Dec 1
59. âœ… **Multi-Locale Company Pages Index (companies.html)**:
   - Created `web-es/companies.html` with all 114 Spanish company cards and pagination (20 per page, 6 pages)
   - Created `web-pt/companies.html` with all 39 Portuguese company cards and pagination
   - Created `web-de/companies.html` with all 20 German company cards and pagination
   - All pages feature:
     - Client-side JavaScript pagination
     - Language switcher preserving query strings
     - Consistent header/footer navigation
     - Bot detection and Google Analytics integration
     - Responsive grid layout (3 columns â†’ 2 â†’ 1 on mobile)

60. âœ… **Footer Consistency Update (All Locales)**:
   - Standardized footer links across all ES, PT, and DE pages
   - Added missing "Books" and "Recruiting Guides" links to all locale footers
   - Updated footer link text for consistency:
     - ES: Precios, Preguntas Frecuentes, Libros, GuÃ­as de Reclutamiento, Contacto, PolÃ­tica de Privacidad, TÃ©rminos de Servicio
     - PT: PreÃ§os, Perguntas Frequentes, Livros, Guias de Recrutamento, Contato, PolÃ­tica de Privacidade, Termos de ServiÃ§o
     - DE: Preise, HÃ¤ufige Fragen, BÃ¼cher, Recruiting-LeitfÃ¤den, Kontakt, Datenschutzrichtlinie, Nutzungsbedingungen
   - Updated all main pages: index.html, faq.html, books.html, blog.html, contact_us.html, privacy_policy.html, terms_of_service.html

61. âœ… **Sitemap Updates for Company Pages**:
   - Added `companies.html` index page to DE sitemap with hreflang tags
   - Added `companies.html` + 75 company page entries to ES sitemap
   - PT sitemap already had all 39 company pages + companies.html
   - All sitemaps now include proper cross-locale hreflang references

62. âœ… **Translation Quality Audit (PT & DE Company Pages)**:
   - Verified high-quality translations on sample company pages (Herbalife, Vorwerk)
   - PT pages: Proper Portuguese terminology (Recrutamento, Guias, ConstruÃ§Ã£o de Equipes)
   - DE pages: Proper German terminology (KI-Recruiting, Vertriebspartner, Teamaufbau)
   - Navigation fully localized (Startseite, Screenshots, Preise, FAQ, BÃ¼cher, Kontakt)
   - Breadcrumbs properly translated (Recruiting-LeitfÃ¤den, Guias de Recrutamento)

63. âœ… **URL Consistency Fix (books/ â†’ books.html)**:
   - Fixed 281 files across all sites with `href="/books/"` â†’ `href="/books.html"`
   - Fixed og:url and canonical URLs in web/books.html and web/books/index.html
   - Ensures consistent URL structure without trailing slashes

64. âœ… **Comprehensive Internal Link Audit & Fixes**:
   - Audited all internal links across EN, ES, PT, and DE websites
   - Fixed blog post link: `30-day-pre-qualification-system.html` â†’ `qualify-new-recruits-30-days.html` (all 4 sites)
   - Fixed 14 broken company cross-reference links in EN/ES (mapped to existing companies):
     - gold-canyon â†’ scentsy, celebrating-home â†’ pampered-chef, ctfo â†’ kannaway
     - hempworx â†’ kannaway, natura â†’ avon, organo-gold â†’ dxn
     - origami-owl â†’ paparazzi, powur â†’ ambit-energy, rainbow-vacuum â†’ vorwerk
     - southwestern-advantage â†’ cutco, tlc â†’ total-life-changes, utility-warehouse â†’ ambit-energy
   - Fixed 37 broken company cross-references in PT site (mapped to existing PT companies)
   - Fixed 2 broken company cross-references in DE site (enagic â†’ herbalife, pampered-chef â†’ vorwerk)
   - Removed non-existent blog-post.css references from ES/PT/DE blog posts
   - Fixed relative `index.html` â†’ `/` in privacy/terms pages

65. âœ… **German Book Cover (MLM-Cover-DE.jpg)**:
   - Added high-resolution German book cover (1200x1920 pixels, 447KB)
   - Source: `/Users/sscott/Downloads/MLM Cover DE.png` converted to JPEG at 95% quality
   - Removed incorrect MLM-Cover-ES.jpg that was in web-de folder
   - Cover displays properly on de.teambuildpro.com/books.html

66. âœ… **Sandwich Menu Consistency (ES/PT/DE)**:
   - Added missing "Books" link to all three non-EN sites:
     - ES: Libros â†’ /books.html
     - PT: Livros â†’ /books.html
     - DE: BÃ¼cher â†’ /books.html
   - Fixed contact links from absolute URLs to relative paths
     - Was: `https://es.teambuildpro.com/contact_us.html`
     - Now: `/contact_us.html`
   - All sandwich menus now match EN site structure with 6 items:
     Screenshots, Pricing, FAQ, Blog, Books, Contact

### Week of Dec 2
67. âœ… **App Version 1.0.70+100 Approved (iOS & Android)**:
   - Both App Store Connect and Google Play Console approved the localized build
   - Live production servers now include full ES, PT, DE localizations
   - App names localized: "Team Build Pro: IA Equipo" (ES), "Team Build Pro: IA Equipe" (PT), "Team Build Pro: KI Team" (DE)
   - All localized metadata, subtitles, descriptions, and keywords now live

68. âœ… **Email Campaign A/B Test Disabled**:
   - Disabled A/B testing in favor of Version A ('initial') template only
   - Version A (personal style): 8.3% open rate, 2.1% failure rate
   - Version B (marketing style): 2.4% open rate, 28.6% failure rate
   - Analysis: Personal email style significantly outperforms marketing-style templates
   - Updated `functions/email-campaign-functions.js` and `functions/email-campaign-functions-yahoo.js`
   - Both now use hardcoded `templateVersion = 'initial'` instead of random selection

69. âœ… **SMTP Email Validation System**:
   - Created `scripts/smtp-validate-emails.js` using deep-email-validator (Node.js)
   - Features: Progress saving/resume, rate limiting, categorization (valid/invalid/unverifiable)
   - Validated 18,334 Gmail addresses:
     - Valid: 16,364 (89.3%)
     - Invalid: 0 (0%)
     - Unverifiable: 1,970 (10.7%) - includes typos and non-existent accounts
   - Discovery: Gmail allows SMTP verification, but Yahoo/AOL/Live.com block it
   - Output: `emails/smtp_validated/valid_emails.csv` (Firestore-ready format)

70. âœ… **Firestore Email Import Script**:
   - Created `scripts/import-validated-emails.js` for importing validated emails
   - Imports to `emailCampaigns/master/contacts` collection
   - Generates `randomIndex` (0-1) for queue ordering to ensure even distribution
   - Sets `sent=false`, `status='pending'` for new contacts
   - Skips contacts that already exist (preserves sent status)
   - Successfully imported 13,298 new SMTP-validated contacts
   - Total contacts in Firestore: 17,913 (13,953 unsent)

71. âœ… **Email Campaign Batch Size Increases**:
   - Main campaign: 15 â†’ 75 emails per batch
   - Yahoo campaign: 5 â†’ 10 emails per batch
   - Updated `functions/.env.teambuilder-plus-fe74d`:
     - `EMAIL_CAMPAIGN_BATCH_SIZE=75`
     - `EMAIL_CAMPAIGN_BATCH_SIZE_YAHOO=10`
   - Daily capacity increased: ~450 main + ~60 Yahoo = ~510 emails/day
   - Estimated completion: ~27 days for remaining 13,953 unsent contacts

72. âœ… **Cross-Page Referral Tracking for Google Play Attribution**:
   - Added `referral-tracking.js` to blog posts and company pages
   - Captures referral codes from URL parameters (?new= or ?ref=)
   - Mints referral tokens via `issueReferralV2` Cloud Function
   - Updates Google Play links with `referrer` parameter for attribution
   - Uses sessionStorage for cross-page persistence within browser session

73. âœ… **Site-Wide Top Invite Bar**:
   - Extended referral-tracking.js to show sponsor info on ALL pages
   - Creates dynamic "Invited by [Name]" bar with sponsor avatar
   - Reads from sessionStorage (same key as index.html inline code)
   - Added to 328 files: books, faq, contact, companies, blog, privacy, terms pages
   - Localized labels for all 4 languages:
     - EN: "Invited by" / "Recommended by"
     - ES: "Invitado por" / "Recomendado por"
     - PT: "Convidado por" / "Recomendado por"
     - DE: "Eingeladen von" / "Empfohlen von"

74. âœ… **Localized Referral Tracking Scripts**:
   - Created `web-es/js/referral-tracking.js` (Spanish labels)
   - Created `web-pt/js/referral-tracking.js` (Portuguese labels)
   - Created `web-de/js/referral-tracking.js` (German labels)
   - All scripts maintain same functionality as EN version
   - sessionStorage keys match for cross-domain consistency

75. âœ… **App Store URL Standardization**:
   - Changed all App Store URLs to simplified format: `https://apps.apple.com/us/app/id6751211622`
   - Previous formats had app name slug which could change
   - Updated 328 files across all 4 sites (EN/ES/PT/DE)
   - 927 URL occurrences standardized
   - Benefits: Future-proof, consistent, shorter, easier to maintain
   - Google Play URLs unchanged: `https://play.google.com/store/apps/details?id=com.scott.ultimatefix`

76. âœ… **Comprehensive Website Audit**:
   - Audited referral-tracking.js presence on all pages across EN/ES/PT/DE
   - Verified CTA buttons (App Store + Google Play links) on all pages
   - Confirmed invite bar CSS exists in all 4 css/style.css files
   - Verified sessionStorage key consistency (`tbp_referral`)
   - All localized labels verified correct

77. âœ… **Knowledge Base Update (Dec 2 Session)**:
   - Updated TEAM_BUILD_PRO_KNOWLEDGE.md with Week of Dec 2 changes (#67-77)
   - Copied to CLAUDE.md for AI assistant context

---

## ğŸ“ Contact & Support

- **Creator**: Stephen Scott (sscott@info.teambuildpro.com)
- **Support Email**: support@teambuildpro.com
- **GitHub**: Private repository
- **Firebase Project**: teambuilder-plus-fe74d

---

## ğŸ¯ Business Model

**NOT a business opportunity** - Team Build Pro is a B2B SaaS tool:
- **Revenue Model**: Subscription ($4.99/month after 30-day trial)
- **Target Market**: Direct sales professionals and their prospects
- **Competitive Advantage**: Only platform enabling pre-building teams before joining
- **Distribution**: iOS App Store, Google Play Store

---

*This knowledge base should be referenced at the start of each new AI assistant session to maintain context and understanding of Team Build Pro.*
