<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Team Build Pro - The Ultimate Team Building App</title>
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap"
        rel="stylesheet" />
    <!-- Google Material Symbols (for consistent icons) -->
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <!-- Favicon -->
    <link rel="icon" href="assets/icons/team-build-pro.png" type="image/png" />
    <!-- Smart App Banner for iOS Safari -->
    <meta name="apple-itunes-app" content="app-id=YOUR_APP_ID" />
    <!-- Apple Touch Icon for Universal Links -->
    <link rel="apple-touch-icon" href="assets/icons/team-build-pro.png" />
    <link rel="stylesheet" href="css/style.css" />

    <!-- All styles consolidated in external CSS file -->
</head>

<body>
    <!-- Header -->
    <header class="header">
        <nav class="nav container">
            <div class="logo">
                <img src="assets/icons/team-build-pro.png" alt="Team Build Pro Logo" />
                <span>Team Build Pro</span>
            </div>
            <!-- Sandwich Menu Button -->
            <button id="menu-btn" class="menu-btn" aria-label="Open menu" aria-haspopup="true" aria-expanded="false">
                <span class="material-symbols-outlined">menu</span>
            </button>
            <!-- Dropdown Menu -->
            <div id="mobile-menu" class="mobile-menu" role="menu">
                <a href="#screenshots" role="menuitem">Screenshots</a>
                <a href="#pricing" role="menuitem">Pricing</a>
                <a href="#faq" role="menuitem">FAQ</a>
                <a href="/contact_us.html" role="menuitem">Contact Us</a>
            </div>
        </nav>
    </header>

    <main>
        <!-- Hero Section -->
        <section class="hero gradient-bg">
            <div class="container">
                <div class="hero-content">
                    <div id="personal-invite-container"></div>

                    <span id="hero-badge" class="platform-badge">Your Blueprint for Team Growth</span>
                    <h1 id="hero-headline">
                        Build Your Foundation <br />
                        <span class="accent">Accelerate Your Momentum</span>
                    </h1>
                    <p id="hero-subheadline">
                        The ultimate app for direct sales professionals to build, manage, and scale your team with
                        unstoppable momentum.
                    </p>
                    <div class="hero-buttons">
                        <a href="#" id="cta-hero" class="primary-button cta-button large-button">Download on Apple Store<br>Enjoy 30-Day Free Trial!</a>
                    </div>
                </div>
            </div>
        </section>




        <!-- "Who It's For" Section -->
        <section id="who-its-for" class="section section-gray">
            <div class="container">
                <div class="section-header">
                    <h2 id="who-headline">Built for Every Stage</h2>
                    <p id="who-subheadline">
                        Whether you're an aspiring leader, an active builder, or a seasoned mentor, our tools grow with
                        you.
                    </p>
                </div>
                <div class="grid grid-3">
                    <div class="feature-card reveal-on-scroll">
                        <div class="feature-card-header">
                            <div class="feature-icon orange"><span
                                    class="material-symbols-outlined">rocket_launch</span></div>
                            <h3 id="who-card1-headline">For Aspiring Leaders</h3>
                        </div>
                        <p id="who-card1-text">
                            Get a powerful head start. Begin building your team before you officially join an
                            opportunity
                            and launch with unstoppable momentum.
                        </p>
                    </div>
                    <div class="feature-card reveal-on-scroll">
                        <div class="feature-card-header">
                            <div class="feature-icon blue"><span class="material-symbols-outlined">monitoring</span>
                            </div>
                            <h3 id="who-card2-headline">For Active Team Builders</h3>
                        </div>
                        <p id="who-card2-text">
                            Efficiently track, manage, and expand your organization with powerful analytics and
                            seamless,
                            secure communication tools.
                        </p>
                    </div>
                    <div class="feature-card reveal-on-scroll">
                        <div class="feature-card-header">
                            <div class="feature-icon purple"><span class="material-symbols-outlined">groups</span></div>
                            <h3 id="who-card3-headline">For Seasoned Mentors</h3>
                        </div>
                        <p id="who-card3-text">
                            Cultivate a thriving global network, mentor emerging leaders, and ensure sustainable growth
                            across your entire organization.
                        </p>
                    </div>
                </div>
            </div>
        </section>


        <!-- "The Why" Section -->
        <section id="the-why" class="section section-gray">
            <div class="container">
                <div class="section-header">
                    <h2 id="why-headline">Turn a Cold Start into a Running Start</h2>
                    <p id="why-subheadline">
                        We solve the biggest hurdle in direct sales: building momentum from day one.
                    </p>
                </div>
                <div class="grid grid-3">
                    <div class="feature-card reveal-on-scroll">
                        <div class="feature-card-header">
                            <div class="feature-icon red"><span class="material-symbols-outlined">warning</span></div>
                            <h3 id="why-card1-headline">Roadmap To Success</h3>
                        </div>
                        <p id="why-card1-text">
                            Starting from zero is tough. Professionals often struggle to find motivated prospects and
                            build momentum quickly, leading to frustration and slow growth.
                        </p>
                    </div>
                    <div class="feature-card reveal-on-scroll">
                        <div class="feature-card-header">
                            <div class="feature-icon blue"><span class="material-symbols-outlined">lightbulb</span>
                            </div>
                            <h3 id="why-card2-headline">The Solution</h3>
                        </div>
                        <p id="why-card2-text">
                            Team Build Pro offers a unique system for pre-building your team, allowing you to cultivate
                            a
                            network of interested prospects before you even launch.
                        </p>
                    </div>
                    <div class="feature-card reveal-on-scroll">
                        <div class="feature-card-header">
                            <div class="feature-icon green"><span class="material-symbols-outlined">trending_up</span>
                            </div>
                            <h3 id="why-card3-headline">Why It Works</h3>
                        </div>
                        <p id="why-card3-text">
                            By focusing on relationships first, our platform creates genuine momentum. Prospects in a
                            growing community are more engaged, motivated, and prepared for success.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- App Screenshots -->
        <section id="screenshots" class="section section-white">
            <div class="container">
                <div class="section-header">
                    <h2>A Glimpse Inside</h2>
                    <p>Explore the tools that empower your teams growth.</p>
                </div>
                <div class="shots-grid" aria-label="App screenshots">
                    <figure class="shot">
                        <div class="phone">
                            <img src="assets/images/screens/1.png"
                                alt="Dashboard with menu of tools" loading="lazy">
                        </div>
                    </figure>

                    <figure class="shot">
                        <div class="phone">
                            <img src="assets/images/screens/2.png" alt="Tools to build and manage your team"
                                loading="lazy">
                        </div>
                    </figure>

                    <figure class="shot">
                        <div class="phone">
                            <img src="assets/images/screens/3.png" alt="Multiple team reports"
                                loading="lazy">
                        </div>
                    </figure>

                    <figure class="shot">
                        <div class="phone">
                            <img src="assets/images/screens/4.png" alt="Detailed reports" loading="lazy">
                        </div>
                    </figure>

                    <figure class="shot">
                        <div class="phone">
                            <img src="assets/images/screens/5.png" alt="Team member profile and messaging"
                                loading="lazy">
                        </div>
                    </figure>

                    <figure class="shot">
                        <div class="phone">
                            <img src="assets/images/screens/6.png" alt="Growth strategies and share links"
                                loading="lazy">
                        </div>
                    </figure>

                    <figure class="shot">
                        <div class="phone">
                            <img src="assets/images/screens/7.png" alt="Growth strategies and share links" loading="lazy">
                        </div>
                    </figure>
                    
                    <figure class="shot">
                        <div class="phone">
                            <img src="assets/images/screens/8.png" alt="Growth strategies and share links" loading="lazy">
                        </div>
                    </figure>
                </div>
            </div>
        </section>


        <!-- "How It Works" Section -->
        <section id="how-it-works" class="section section-gray">
            <div class="container">
                <div class="section-header">
                    <h2>Simple 3-Step Process</h2>
                    <p>Our proven process helps you build momentum from the very beginning.</p>
                </div>
                <div class="grid grid-3">
                    <div class="feature-card reveal-on-scroll">
                        <div class="feature-card-header">
                            <div class="feature-icon blue">
                                <span class="material-symbols-outlined">timer_1</span>
                            </div>
                            <h3>Invite & Connect</h3>
                        </div>
                        <p>
                            Connect with like-minded professionals who are open to exploring your opportunity and invite
                            them to your pre-build network.
                        </p>
                    </div>
                    <div class="feature-card reveal-on-scroll">
                        <div class="feature-card-header">
                            <div class="feature-icon green">
                                <span class="material-symbols-outlined">timer_2</span>
                            </div>
                            <h3>Cultivate Momentum</h3>
                        </div>
                        <p>
                            Foster authentic relationships as your network grows, creating a thriving community of
                            professionals who support each other's success.
                        </p>
                    </div>
                    <div class="feature-card reveal-on-scroll">
                        <div class="feature-card-header">
                            <div class="feature-icon purple">
                                <span class="material-symbols-outlined">timer_3</span>
                            </div>
                            <h3>Launch with Success</h3>
                        </div>
                        <p>
                            Team members who achieve key growth goals earn an automatic invitation to join your official
                            opportunity and turn their potential into performance.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- "Features / Why Choose Us" Section -->
        <section id="features" class="section section-white">
            <div class="container">
                <div class="section-header">
                    <h2>High-Performance<br>Team Building Tools</h2>
                    <p>Everything you need to build, manage, and scale with confidence.</p>
                </div>
                <div class="grid grid-3">
                    <div class="feature-card reveal-on-scroll">
                        <div class="feature-card-header">
                            <div class="feature-icon blue"><span class="material-symbols-outlined">hub</span></div>
                            <h3>Complete Team Development</h3>
                        </div>
                        <p>
                            Expand your team worldwide, monitor qualification progress, and foster collaborative
                            relationships with powerful, intuitive tools.
                        </p>
                    </div>
                    <div class="feature-card reveal-on-scroll">
                        <div class="feature-card-header">
                            <div class="feature-icon purple"><span class="material-symbols-outlined">security</span>
                            </div>
                            <h3>Trust, Security & Performance</h3>
                        </div>
                        <p>
                            Built with enterprise-grade security and engineered for a lightning-fast, reliable
                            experience. Your data is safe and accessible 24/7.
                        </p>
                    </div>
                    <div class="feature-card reveal-on-scroll">
                        <div class="feature-card-header">
                            <div class="feature-icon emerald"><span class="material-symbols-outlined">chat</span></div>
                            <h3>Secure Global Communication</h3>
                        </div>
                        <p>
                            Communicate with your team worldwide using a built-in, secure messaging system. Receive
                            daily growth updates and milestone notifications.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Pricing Section -->
        <section id="pricing" class="section section-gray">
            <div class="container">
                <div class="section-header">
                    <h2>Simple, Transparent Pricing</h2>
                    <p>One plan, all features. Start your free trial today, no credit card required.</p>
                </div>
                <div class="pricing-card">
                    <h3>Subscription Plan</h3>
                    <p class="subtitle">Full access to all our premium features.</p>
                    <div class="price">
                        <span class="amount">$4.99</span>
                        <span class="period">/ month</span>
                    </div>
                    <ul class="features-list">
                        <li><span class="material-symbols-outlined">check_circle</span>Unlimited Team Members</li>
                        <li><span class="material-symbols-outlined">check_circle</span>Real-time Analytics</li>
                        <li><span class="material-symbols-outlined">check_circle</span>Secure Messaging</li>
                        <li><span class="material-symbols-outlined">check_circle</span>Global Team Building</li>
                        <li><span class="material-symbols-outlined">check_circle</span>24/7 Customer Support</li>
                    </ul>
                    <a href="#" id="cta-pricing" class="pricing-button cta-button">Start 30-Day Free Trial</a>
                </div>
            </div>
        </section>

        <!-- FAQ Section -->
        <section id="faq" class="section section-white">
            <div class="container">
                <div class="section-header">
                    <h2>Frequently Asked Questions</h2>
                    <p>
                        Have questions? We've got answers. If you have other questions, feel free to reach out.
                    </p>
                </div>
                <div class="faq">
                    <div class="faq-item">
                        <button class="faq-button" onclick="toggleFAQ(1)">
                            <span>Is Team Build Pro a business opportunity?</span>
                            <span class="material-symbols-outlined faq-icon" id="icon-1">expand_more</span>
                        </button>
                        <div class="faq-content" id="content-1">
                            No. Team Build Pro is not a business opportunity or income platform of any kind. We are a
                            software tool designed exclusively to help professionals build and track their teams. We do
                            not provide any form of user compensation.
                        </div>
                    </div>
                    <div class="faq-item">
                        <button class="faq-button" onclick="toggleFAQ(2)">
                            <span>Who is this platform for?</span>
                            <span class="material-symbols-outlined faq-icon" id="icon-2">expand_more</span>
                        </button>
                        <div class="faq-content" id="content-2">
                            Our platform is perfect for direct sales professionals, affiliate marketers, team leaders,
                            and any entrepreneur looking to build a collaborative organization. Whether you're just
                            starting or you're a seasoned mentor, our tools scale with you.
                        </div>
                    </div>
                    <div class="faq-item">
                        <button class="faq-button" onclick="toggleFAQ(3)">
                            <span>Do I need a credit card for the free trial?</span>
                            <span class="material-symbols-outlined faq-icon" id="icon-3">expand_more</span>
                        </button>
                        <div class="faq-content" id="content-3">
                            No. You can enjoy full access to all premium features for 30 days completely free, with no
                            credit card required to start. You can decide to subscribe at any point during or after your
                            trial.
                        </div>
                    </div>
                    <div class="faq-item">
                        <button class="faq-button" onclick="toggleFAQ(4)">
                            <span>Can I cancel my subscription at any time?</span>
                            <span class="material-symbols-outlined faq-icon" id="icon-4">expand_more</span>
                        </button>
                        <div class="faq-content" id="content-4">
                            Yes. You can cancel your subscription at any time with no long-term commitments or
                            cancellation fees. You will retain access until the end of your current billing period.
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- CTA Section -->
        <section class="cta-section gradient-bg">
            <div class="container">
                <h2 id="cta-final-headline">Ready to Build Your Empire?</h2>
                <p id="cta-final-subheadline">
                    Join thousands of professionals who are building their teams faster than ever before. Start your
                    30-day free trial today.
                </p>
                <a href="#" id="cta-final" class="cta-button">Download on Apple Store<br>Enjoy 30-Day Free Trial!</a>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-logo">
                <img src="assets/icons/team-build-pro.png" alt="Team Build Pro Logo" />
                <span>Team Build Pro</span>
            </div>
            <div class="footer-links">
                <a href="/#pricing">Pricing</a>
                <a href="/#faq">FAQ</a>
                <a href="/contact_us.html">Contact</a>
                <a href="/privacy_policy.html">Privacy Policy</a>
                <a href="/terms_of_service.html">Terms of Service</a>
            </div>


            <p>&copy; <span id="currentYear"></span> Team Build Pro. All Rights Reserved.</p>
        </div>
    </footer>

    <!-- COMING SOON MODAL -->
    <div id="comingSoonModal" class="modal-overlay" onclick="closeModal()">
        <div class="modal-content" onclick="event.stopPropagation()">
            <h2>ðŸš€ Coming Soon!</h2>
            <p>
                Our app is putting on the final touches and will be launching on the App Store very soon. Get ready
                to build like a pro!
            </p>
            <button class="modal-close-btn" onclick="closeModal()">Got it!</button>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyA45ZN9KUuaYT0OHYZ9DmX2Jc8028Ftcvc",
            authDomain: "teambuilder-plus-fe74d.firebaseapp.com",
            projectId: "teambuilder-plus-fe74d",
            storageBucket: "teambuilder-plus-fe74d.firebasestorage.app",
            messagingSenderId: "312163687148",
            appId: "1:312163687148:web:43385dff773dab0b3763c9",
            measurementId: "G-G4E4TBBPZ7"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // ============================================================================
        // DYNAMIC CONTENT FOR DIFFERENT USER JOURNEYS
        // ============================================================================
        const contentFor = {
            partner: {
                heroBadge: "PROVEN TEAM BUILDING SYSTEM",
                heroHeadline: `Empower Your Team <br> <span class="accent">Accelerate Growth</span>`,
                heroSubheadline:
                    "The ultimate app for direct sales professionals to manage and scale your existing team with unstoppable momentum and exponential growth.",
                whoHeadline: "Built for Every Stage of Success",
                whoSubheadline:
                    "Whether you're an aspiring leader, an active builder, or a seasoned mentor, our tools grow with you.",
                whoCard1Headline: "For Aspiring Leaders",
                whoCard1Text:
                    "Get a powerful head start. Begin building your team before you officially join an opportunity and launch with unstoppable momentum.",
                whoCard2Headline: "For Active Team Builders",
                whoCard2Text:
                    "Efficiently track, manage, and expand your organization with powerful analytics and seamless, secure communication tools.",
                whoCard3Headline: "For Seasoned Mentors",
                whoCard3Text:
                    "Cultivate a thriving global network, mentor emerging leaders, and ensure sustainable growth across your entire organization.",
                whyHeadline: "Unlocking Duplication",
                whySubheadline: "We solve the biggest hurdle in direct sales: creating growth and sustaining momentum.",
                whyCard1Headline: "Roadmap To Success",
                whyCard1Text:
                    "It's hard to get new team members to duplicate your success. Without a simple system to follow, momentum stalls and growth becomes a struggle.",
                whyCard2Headline: "The Solution",
                whyCard2Text:
                    "Team Build Pro provides your entire organization with a simple, unified system to follow, ensuring everyone can build effectively from day one.",
                whyCard3Headline: "Why It Works",
                whyCard3Text:
                    "By providing a clear roadmap and powerful tools for everyone, we remove the guesswork from team building, leading to faster, more sustainable duplication.",
                ctaFinalHeadline: "Ready to Empower Your Team?",
                ctaFinalSubheadline:
                    "Give your entire organization the tools they need to succeed. Start your 30-day free trial today.",
                ctaHeader: "Download on Apple Store<br>Enjoy 30-Day Free Trial!",
                ctaHero: "Download on Apple Store<br>Enjoy 30-Day Free Trial!",
                ctaPricing: "Download on Apple Store<br>Enjoy 30-Day Free Trial!",
                ctaFinal: "Download on Apple Store<br>Enjoy 30-Day Free Trial!",
            },
            new: {
                heroBadge: "Your Head Start to Success",
                heroHeadline: `Build Your Foundation <br> <span class="accent">Before Day One</span>`,
                heroSubheadline:
                    "The ultimate system to pre-build a large team BEFORE joining the business opportunity, positioning you for immediate success.",
                whoHeadline: "Pre-Launch Your Business",
                whoSubheadline:
                    "This isn't just an app; it's a strategic advantage for ambitious professionals ready to start strong.",
                whoCard1Headline: "Pre-Build Your Team",
                whoCard1Text:
                    "Use our system to invite and organize a network of interested prospects before you even join the business. No more starting from zero.",
                whoCard2Headline: "Create Real Momentum",
                whoCard2Text:
                    "Cultivate a thriving community that's ready to launch with you. When your team sees growth from day one, their belief and motivation skyrockets.",
                whoCard3Headline: "Launch with Confidence",
                whoCard3Text:
                    "Step into your new opportunity with a pre-built foundation, ready to achieve success and earn income from the very beginning.",
                whyHeadline: "Experience Early Success",
                whySubheadline: "We solve the biggest hurdle in direct sales: building momentum from day one.",
                whyCard1Headline: "Roadmap To Success",
                whyCard1Text:
                    "Starting a new business from zero is the biggest hurdle. It's a slow, uphill battle to build initial momentum, often leading to frustration.",
                whyCard2Headline: "The Solution",
                whyCard2Text:
                    "Team Build Pro lets you build a network of motivated prospects first. You cultivate a ready-to-go team that can launch with you.",
                whyCard3Headline: "Why It Works",
                whyCard3Text:
                    "By focusing on community and momentum before the sale, you de-risk the opportunity for your prospects and ensure a powerful, successful launch.",
                ctaFinalHeadline: "Ready to Build Your Foundation?",
                ctaFinalSubheadline:
                    "Join thousands of professionals who are building their teams faster than ever before. Start building your team for free today.",
                ctaHeader: "Download on Apple Store<br>Enjoy 30-Day Free Trial!",
                ctaHero: "Download on Apple Store<br>Enjoy 30-Day Free Trial!",
                ctaPricing: "Download on Apple Store<br>Enjoy 30-Day Free Trial!",
                ctaFinal: "Download on Apple Store<br>Enjoy 30-Day Free Trial!",
            },
        };

        // Function to update the DOM with dynamic content
        function updatePageContent(type = "partner") {
            const content = contentFor[type] || contentFor.partner;

            // Helper to safely update element content
            const updateElement = (id, content, isHtml = false) => {
                const element = document.getElementById(id);
                if (element) {
                    if (isHtml) {
                        element.innerHTML = content;
                    } else {
                        element.textContent = content;
                    }
                }
            };

            // Update Hero Section
            updateElement("hero-badge", content.heroBadge);
            updateElement("hero-headline", content.heroHeadline, true);
            updateElement("hero-subheadline", content.heroSubheadline);

            // Update "Who It's For" Section
            updateElement("who-headline", content.whoHeadline);
            updateElement("who-subheadline", content.whoSubheadline);
            updateElement("who-card1-headline", content.whoCard1Headline);
            updateElement("who-card1-text", content.whoCard1Text);
            updateElement("who-card2-headline", content.whoCard2Headline);
            updateElement("who-card2-text", content.whoCard2Text);
            updateElement("who-card3-headline", content.whoCard3Headline);
            updateElement("who-card3-text", content.whoCard3Text);

            // Update "The Why" Section
            updateElement("why-headline", content.whyHeadline);
            updateElement("why-subheadline", content.whySubheadline);
            updateElement("why-card1-headline", content.whyCard1Headline);
            updateElement("why-card1-text", content.whyCard1Text);
            updateElement("why-card2-headline", content.whyCard2Headline);
            updateElement("why-card2-text", content.whyCard2Text);
            updateElement("why-card3-headline", content.whyCard3Headline);
            updateElement("why-card3-text", content.whyCard3Text);

            // Update Final CTA
            updateElement("cta-final-headline", content.ctaFinalHeadline);
            updateElement("cta-final-subheadline", content.ctaFinalSubheadline);

            // Update all CTA buttons
            updateElement("cta-header", content.ctaHeader, true);
            updateElement("cta-hero", content.ctaHero, true);
            updateElement("cta-pricing", content.ctaPricing, true);
            updateElement("cta-final", content.ctaFinal, true);
        }

        // ============================================================================
        // REFERRAL LOGIC
        // ============================================================================

        function getReferralInfo() {
            if (window.location.protocol === "file:") return null;
            const urlParams = new URLSearchParams(window.location.search);
            const newProspectCode = urlParams.get("new");
            const partnerCode = urlParams.get("ref");

            if (newProspectCode && isValidReferralCode(newProspectCode)) {
                return { code: newProspectCode, type: "new" };
            }
            if (partnerCode && isValidReferralCode(partnerCode)) {
                return { code: partnerCode, type: "partner" };
            }
            return null;
        }

        function isValidReferralCode(code) {
            return (
                code &&
                code.trim().length >= 3 &&
                code.length <= 50 &&
                !/[:/\\]/.test(code) &&
                !/^(file|C:)/.test(code)
            );
        }

        function createInviteSection(firstName, lastName, referralType, bizOppName, photoUrl) {
            const inviteContainer = document.getElementById('personal-invite-container');
            const heroHeadline = document.getElementById('hero-headline');
            const heroSubheadline = document.getElementById('hero-subheadline');
            const ctaHero = document.getElementById('cta-hero');

            if (typeof kDebugMode !== 'undefined' && kDebugMode) {
                if (!inviteContainer || !heroHeadline || !heroSubheadline || !ctaHero) {
                    console.error("Hero elements not found for personalization.");
                }
            }

            const avatarUrl = photoUrl || 'assets/images/default_avatar.png';
            const referrerFullName = `${firstName} ${lastName}`;
            const opportunityName = `<strong>${bizOppName || 'their opportunity'}</strong>`;

            // 1. Create the integrated invitation bar (this part is the same)
            inviteContainer.innerHTML = `
        <div class="invite-bar">
            <img src="${avatarUrl}" alt="${referrerFullName}" class="invite-avatar" onerror="this.src='assets/images/default_avatar.png';">
            <span class="invite-text">You've been personally invited by <strong>${referrerFullName}</strong></span>
        </div>
    `;

            // 2. Personalize the hero content based on the referral type
            if (referralType === "new") {
                // Journey for a new prospect invited to pre-build a team
                heroHeadline.innerHTML = `Pre-Build Your Foundation <br> <span class="accent">Before Launch!</span>`;
                heroSubheadline.innerHTML = `${referrerFullName} is inviting you to get a head start. Use the Team Build Pro app to pre-build your ${opportunityName} team before you officially join!`;
                ctaHero.innerHTML = `Download on Apple Store<br>Enjoy 30-Day Free Trial!`;

            } else { // "partner"
                // Journey for an existing leader referred by a colleague
                heroHeadline.innerHTML = `Empower Your Team <br> <span class="accent">Accelerate Growth</span>`;
                heroSubheadline.innerHTML = `Your ${opportunityName} colleague, ${referrerFullName} is inviting you to see the tool they're using to build their team, and thought it could help you build yours, too.`;
                ctaHero.innerHTML = `Download on Apple Store<br>Enjoy 30-Day Free Trial!`;
            }

            // Hide the generic badge now that a personal invitation is shown
            const heroBadge = document.getElementById('hero-badge');
            if (heroBadge) {
                heroBadge.style.display = 'none';
            }
        }

        // Update fetchUserAndDisplayInvite to include photoUrl
        async function fetchUserAndDisplayInvite(referralInfo) {
            try {
                const url = `https://us-central1-teambuilder-plus-fe74d.cloudfunctions.net/getUserByReferralCode?code=${referralInfo.code}`;
                const response = await fetch(url);

                if (!response.ok) {
                    console.error("Sponsor not found or server error:", response.status);
                    return;
                }

                const userData = await response.json();
                console.log("User data received:", userData);
                // Adjusted to check for photoUrl in different possible fields
                const photoUrl = userData.photoUrl || userData.photoURL || userData.profilePhotoUrl || null;
                console.log("Photo URL from database (adjusted):", photoUrl);

                if (userData.firstName && userData.lastName) {
                    const bizOppName = userData.bizOppName || "their opportunity";
                    const validPhotoUrl = photoUrl && photoUrl.trim() !== '' ? photoUrl : null;
                    createInviteSection(
                        userData.firstName,
                        userData.lastName,
                        referralInfo.type,
                        bizOppName,
                        validPhotoUrl
                    );
                }
            } catch (error) {
                console.error("Error fetching user data by referral code:", error);
            }
        }


        async function fetchUserAndDisplayInvite(referralInfo) {
            try {
                const url = `https://us-central1-teambuilder-plus-fe74d.cloudfunctions.net/getUserByReferralCode?code=${referralInfo.code}`;
                const response = await fetch(url);

                if (!response.ok) {
                    console.error("Sponsor not found or server error:", response.status);
                    return;
                }

                const userData = await response.json();
                console.log("User data received:", userData);
                console.log("Photo URL from database:", userData.photoUrl);

                if (userData.firstName && userData.lastName) {
                    const bizOppName = userData.bizOppName || "their opportunity";
                    const photoUrl = userData.photoUrl && userData.photoUrl.trim() !== ''
                        ? userData.photoUrl
                        : null;
                    createInviteSection(
                        userData.firstName,
                        userData.lastName,
                        referralInfo.type,
                        bizOppName,
                        photoUrl
                    );
                }
            } catch (error) {
                console.error("Error fetching user data by referral code:", error);
            }
        }

        // ============================================================================
        // INITIALIZATION & UTILITIES
        // ============================================================================

        function isMobileDevice() {
            return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        }

        const modal = document.getElementById("comingSoonModal");
        function openModal() {
            if (modal) modal.style.display = "flex";
        }
        function closeModal() {
            if (modal) modal.style.display = "none";
        }
        window.addEventListener("keydown", (event) => {
            if (event.key === "Escape") closeModal();
        });

        function updateCTAsForMobile() {
            const ctaIds = ["cta-header", "cta-hero", "cta-pricing", "cta-final"];
            if (isMobileDevice()) {
                ctaIds.forEach((id) => {
                    const button = document.getElementById(id);
                    if (button) {
                        button.textContent = "Get Early Access\nTry Demo!";
                        button.href = "javascript:void(0);";
                        button.target = "_self";
                        button.onclick = openModal;
                    }
                });
                const secondaryHeroButton = document.querySelector(".hero-buttons .secondary-button");
                if (secondaryHeroButton) {
                    secondaryHeroButton.style.display = "none";
                }
            }
        }

        async function initializePage() {
            const referralInfo = getReferralInfo();
            const referralType = referralInfo ? referralInfo.type : "partner";

            updatePageContent(referralType);

            if (referralInfo) {
                console.log("Processing referral:", referralInfo);
                await fetchUserAndDisplayInvite(referralInfo);
            } else {
                console.log("No referral code found. Displaying default partner content.");
            }

            updateCTAsForMobile();
        }

        document.addEventListener("DOMContentLoaded", () => {
            const currentYearEl = document.getElementById("currentYear");
            if (currentYearEl) currentYearEl.textContent = new Date().getFullYear();
        });

        const observer = new IntersectionObserver(
            (entries) => {
                entries.forEach((entry) => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add("revealed");
                    }
                });
            },
            { threshold: 0.1 }
        );

        document.querySelectorAll(".reveal-on-scroll").forEach((el) => observer.observe(el));

        document.addEventListener("DOMContentLoaded", initializePage);

        // FAQ Toggle Function
        function toggleFAQ(index) {
            const content = document.getElementById(`content-${index}`);
            const icon = document.getElementById(`icon-${index}`);
            for (let i = 1; i <= 4; i++) {
                if (i !== index) {
                    document.getElementById(`content-${i}`).classList.remove("open");
                    icon.textContent = 'expand_more';
                }
            }
            content.classList.toggle("open");
            icon.textContent = content.classList.contains('open') ? 'expand_less' : 'expand_more';
        }

        // Sandwich Menu Toggle
        const menuBtn = document.getElementById('menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        const menuIcon = menuBtn.querySelector('.material-symbols-outlined');

        menuBtn.addEventListener('click', () => {
            const isOpen = mobileMenu.classList.toggle('open');
            menuBtn.setAttribute('aria-expanded', isOpen);
            menuIcon.textContent = isOpen ? 'close' : 'menu';
        });

        // Close menu when clicking outside
        document.addEventListener('click', (event) => {
            if (!mobileMenu.contains(event.target) && !menuBtn.contains(event.target)) {
                if (mobileMenu.classList.contains('open')) {
                    mobileMenu.classList.remove('open');
                    menuBtn.setAttribute('aria-expanded', 'false');
                    menuIcon.textContent = 'menu';
                }
            }
        });

        document.addEventListener('DOMContentLoaded', () => {
            const menuBtn = document.getElementById('menu-btn');
            const mobileMenu = document.getElementById('mobile-menu');
            const menuIcon = menuBtn.querySelector('.material-symbols-outlined');

            // Add click listeners to all menu links to close menu on selection
            const menuLinks = mobileMenu.querySelectorAll('a[role="menuitem"]');
            menuLinks.forEach(link => {
                link.addEventListener('click', () => {
                    if (mobileMenu.classList.contains('open')) {
                        mobileMenu.classList.remove('open');
                        menuBtn.setAttribute('aria-expanded', 'false');
                        menuIcon.textContent = 'menu';
                    }
                });
            });
        });


    </script>
</body>

</html>