<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PreIntake.ai - AI-Powered Legal Intake That Screens Like Your Best Paralegal</title>
    <meta name="description" content="AI-powered legal intake that qualifies leads before they hit your CRM. Practice-specific screening for PI, Immigration, Family Law, Bankruptcy & more. Get your fully customized demo today.">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-dark: #0c1f3f;
            --primary-blue: #1a3a5c;
            --accent-gold: #c9a962;
            --accent-gold-light: #e5d4a1;
            --text-light: #ffffff;
            --text-muted: #a0aec0;
            --text-dark: #1a1a2e;
            --bg-light: #f8fafc;
            --bg-card: rgba(255, 255, 255, 0.05);
            --border-subtle: rgba(255, 255, 255, 0.1);
            --success: #48bb78;
            --warning: #ed8936;
            --danger: #f56565;
            --shadow-lg: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            --shadow-glow: 0 0 40px rgba(201, 169, 98, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            color: var(--text-dark);
            line-height: 1.6;
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary-blue) 50%, var(--primary-dark) 100%);
            color: var(--text-light);
            padding: 4rem 2rem 6rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.03'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
            opacity: 0.5;
        }

        .hero-content {
            max-width: 900px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .hero-badge {
            display: inline-block;
            background: rgba(201, 169, 98, 0.2);
            border: 1px solid var(--accent-gold);
            color: var(--accent-gold);
            padding: 0.5rem 1rem;
            border-radius: 50px;
            font-size: 0.875rem;
            font-weight: 500;
            margin-bottom: 1.5rem;
        }

        .hero h1 {
            font-family: 'Playfair Display', serif;
            font-size: clamp(2.5rem, 5vw, 4rem);
            font-weight: 700;
            margin-bottom: 1.5rem;
            line-height: 1.2;
        }

        .hero h1 span {
            color: var(--accent-gold);
        }

        .hero-subtitle {
            font-size: 1.25rem;
            color: var(--text-muted);
            max-width: 700px;
            margin: 0 auto 2.5rem;
            line-height: 1.7;
        }

        .hero-cta {
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
            background: linear-gradient(135deg, var(--accent-gold) 0%, var(--accent-gold-light) 50%, var(--accent-gold) 100%);
            color: var(--primary-dark);
            padding: 1rem 2.5rem;
            border-radius: 12px;
            font-size: 1.125rem;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-glow);
        }

        .hero-cta:hover {
            transform: translateY(-3px);
            box-shadow: 0 0 60px rgba(201, 169, 98, 0.5);
        }

        .hero-cta svg {
            width: 20px;
            height: 20px;
        }

        .hero-note {
            margin-top: 1.5rem;
            font-size: 0.875rem;
            color: var(--text-muted);
        }

        /* Stats Bar */
        .stats-bar {
            background: var(--primary-dark);
            border-top: 1px solid rgba(201, 169, 98, 0.2);
            padding: 2rem;
        }

        .stats-container {
            max-width: 1100px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            text-align: center;
        }

        .stat {
            color: var(--text-light);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--accent-gold);
            margin-bottom: 0.25rem;
        }

        .stat-label {
            font-size: 0.875rem;
            color: var(--text-muted);
        }

        /* Problem Section */
        .section {
            padding: 5rem 2rem;
        }

        .section-dark {
            background: var(--bg-light);
        }

        .section-header {
            text-align: center;
            max-width: 700px;
            margin: 0 auto 3rem;
        }

        .section-header h2 {
            font-family: 'Playfair Display', serif;
            font-size: 2.25rem;
            margin-bottom: 1rem;
            color: var(--primary-dark);
        }

        .section-header p {
            color: #64748b;
            font-size: 1.125rem;
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
        }

        /* Problem Cards */
        .problem-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
        }

        .problem-card {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            border: 1px solid #e2e8f0;
        }

        .problem-card-icon {
            width: 48px;
            height: 48px;
            background: #fee2e2;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
            color: var(--danger);
        }

        .problem-card h3 {
            font-size: 1.125rem;
            margin-bottom: 0.5rem;
            color: var(--primary-dark);
        }

        .problem-card p {
            color: #64748b;
            font-size: 0.95rem;
        }

        /* Comparison Table */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }

        .comparison-table th,
        .comparison-table td {
            padding: 1.25rem 1.5rem;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }

        .comparison-table th {
            background: var(--primary-dark);
            color: var(--text-light);
            font-weight: 600;
        }

        .comparison-table th:first-child {
            background: var(--primary-blue);
        }

        .comparison-table th:last-child {
            background: var(--accent-gold);
            color: var(--primary-dark);
        }

        .comparison-table tr:last-child td {
            border-bottom: none;
        }

        .comparison-table tr:hover td {
            background: #f8fafc;
        }

        .comparison-table td:first-child {
            font-weight: 500;
            color: var(--primary-dark);
        }

        .comparison-table td:last-child {
            color: var(--primary-dark);
            font-weight: 500;
        }

        /* Practice Areas */
        .practice-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .practice-card {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
        }

        .practice-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.12);
        }

        .practice-card h3 {
            font-size: 1.25rem;
            color: var(--primary-dark);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .practice-card h3 span {
            font-size: 1.5rem;
        }

        .practice-card ul {
            list-style: none;
            margin-bottom: 1rem;
        }

        .practice-card li {
            padding: 0.25rem 0;
            color: #64748b;
            font-size: 0.95rem;
        }

        .practice-card li::before {
            content: '‚Üí';
            color: var(--accent-gold);
            margin-right: 0.5rem;
        }

        .practice-card-screening {
            background: #f8fafc;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            font-size: 0.875rem;
            color: var(--primary-blue);
        }

        /* Routing Section */
        .routing-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
        }

        @media (max-width: 768px) {
            .routing-grid {
                grid-template-columns: 1fr;
            }
        }

        .routing-card {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }

        .routing-card.green {
            border-top: 4px solid var(--success);
        }

        .routing-card.yellow {
            border-top: 4px solid var(--warning);
        }

        .routing-card.red {
            border-top: 4px solid var(--danger);
        }

        .routing-badge {
            display: inline-block;
            padding: 0.5rem 1rem;
            border-radius: 50px;
            font-weight: 600;
            font-size: 0.875rem;
            margin-bottom: 1rem;
        }

        .routing-card.green .routing-badge {
            background: #dcfce7;
            color: #166534;
        }

        .routing-card.yellow .routing-badge {
            background: #fef3c7;
            color: #92400e;
        }

        .routing-card.red .routing-badge {
            background: #fee2e2;
            color: #991b1b;
        }

        .routing-card h3 {
            font-size: 1.125rem;
            margin-bottom: 0.5rem;
            color: var(--primary-dark);
        }

        .routing-card p {
            color: #64748b;
            font-size: 0.95rem;
            margin-bottom: 1rem;
        }

        .routing-action {
            font-weight: 500;
            color: var(--primary-dark);
        }

        /* CTA Section */
        .cta-section {
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary-blue) 100%);
            color: var(--text-light);
            padding: 5rem 2rem;
            text-align: center;
        }

        .cta-section h2 {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .cta-section p {
            color: var(--text-muted);
            font-size: 1.125rem;
            max-width: 600px;
            margin: 0 auto 2rem;
        }

        /* Demo Form */
        .demo-form-container {
            max-width: 500px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 2rem;
        }

        .demo-form {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .form-group {
            text-align: left;
        }

        .form-group label {
            display: block;
            font-size: 0.875rem;
            margin-bottom: 0.5rem;
            color: var(--text-muted);
        }

        .form-group input {
            width: 100%;
            padding: 0.875rem 1rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: var(--text-light);
            font-size: 1rem;
            transition: all 0.2s ease;
        }

        .form-group input:focus {
            outline: none;
            border-color: var(--accent-gold);
            background: rgba(255, 255, 255, 0.15);
        }

        .form-group input::placeholder {
            color: var(--text-muted);
        }

        .demo-submit {
            background: linear-gradient(135deg, var(--accent-gold) 0%, var(--accent-gold-light) 50%, var(--accent-gold) 100%);
            color: var(--primary-dark);
            border: none;
            padding: 1rem 2rem;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 0.5rem;
        }

        .demo-submit:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: var(--shadow-glow);
        }

        .demo-submit:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }

        .demo-submit.loading {
            position: relative;
            color: transparent;
        }

        .demo-submit.loading::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            top: 50%;
            left: 50%;
            margin-left: -10px;
            margin-top: -10px;
            border: 2px solid var(--primary-dark);
            border-top-color: transparent;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .demo-note {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-top: 1rem;
        }

        /* Success State */
        .demo-success {
            text-align: center;
            padding: 2rem;
        }

        .demo-success-icon {
            width: 64px;
            height: 64px;
            background: var(--success);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
        }

        .demo-success-icon svg {
            width: 32px;
            height: 32px;
            color: white;
        }

        .demo-success h3 {
            font-size: 1.5rem;
            color: var(--text-light);
            margin-bottom: 0.5rem;
        }

        .demo-success p {
            color: var(--text-muted);
            font-size: 1rem;
        }

        .demo-success .check-email {
            color: var(--accent-gold);
            font-weight: 500;
        }

        /* Error State */
        .form-error {
            background: rgba(245, 101, 101, 0.2);
            border: 1px solid var(--danger);
            color: #feb2b2;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            font-size: 0.875rem;
            margin-bottom: 1rem;
            display: none;
        }

        .form-error.show {
            display: block;
        }

        /* Practice Area Selector */
        .practice-selector {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .practice-selector-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
        }

        .practice-selector-title {
            font-size: 0.875rem;
            color: var(--text-muted);
        }

        .practice-total {
            font-size: 0.875rem;
            font-weight: 600;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            transition: all 0.2s ease;
        }

        .practice-total.valid {
            background: rgba(72, 187, 120, 0.2);
            color: var(--success);
        }

        .practice-total.invalid {
            background: rgba(245, 101, 101, 0.2);
            color: var(--danger);
        }

        .practice-total.zero {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-muted);
        }

        .practice-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.5rem;
        }

        @media (max-width: 500px) {
            .practice-grid {
                grid-template-columns: 1fr;
            }
        }

        .practice-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.5rem 0.75rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 6px;
            transition: all 0.2s ease;
        }

        .practice-row:hover {
            background: rgba(255, 255, 255, 0.08);
        }

        .practice-row.active {
            background: rgba(201, 169, 98, 0.15);
            border: 1px solid rgba(201, 169, 98, 0.3);
        }

        .practice-row.primary {
            background: rgba(201, 169, 98, 0.25);
            border: 1px solid var(--accent-gold);
        }

        .practice-row.primary::after {
            content: '‚òÖ';
            color: var(--accent-gold);
            margin-left: 0.25rem;
            font-size: 0.75rem;
        }

        .practice-label {
            font-size: 0.8rem;
            color: var(--text-light);
            white-space: nowrap;
        }

        .practice-select {
            width: 70px;
            padding: 0.35rem 0.5rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            color: var(--text-light);
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .practice-select:focus {
            outline: none;
            border-color: var(--accent-gold);
            background: rgba(255, 255, 255, 0.15);
        }

        .practice-select option {
            background: var(--primary-dark);
            color: var(--text-light);
        }

        .practice-note {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: 0.75rem;
            text-align: center;
        }

        /* Other practice area with text input */
        .practice-row-other {
            grid-column: 1 / -1;
        }

        .practice-other-input-wrapper {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex: 1;
        }

        .practice-other-icon {
            font-size: 1rem;
        }

        .practice-other-input {
            flex: 1;
            padding: 0.35rem 0.5rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            color: var(--text-light);
            font-size: 0.85rem;
            transition: all 0.2s ease;
            max-width: 200px;
        }

        .practice-other-input:focus {
            outline: none;
            border-color: var(--accent-gold);
            background: rgba(255, 255, 255, 0.15);
        }

        .practice-other-input::placeholder {
            color: var(--text-muted);
        }

        .practice-other-input.required {
            border-color: var(--danger);
            animation: shake 0.3s ease-in-out;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-4px); }
            75% { transform: translateX(4px); }
        }

        /* Honeypot - hidden from humans, bots will fill it */
        .hp-field {
            position: absolute;
            left: -9999px;
            top: -9999px;
            opacity: 0;
            pointer-events: none;
            height: 0;
            width: 0;
            overflow: hidden;
        }

        /* Footer */
        footer {
            background: var(--primary-dark);
            color: var(--text-muted);
            padding: 3rem 2rem;
            text-align: center;
        }

        footer a {
            color: var(--accent-gold);
            text-decoration: none;
        }

        footer a:hover {
            text-decoration: underline;
        }

        .footer-links {
            margin-bottom: 1.5rem;
        }

        .footer-links a {
            margin: 0 1rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero {
                padding: 3rem 1.5rem 4rem;
            }

            .section {
                padding: 3rem 1.5rem;
            }

            .comparison-table {
                font-size: 0.875rem;
            }

            .comparison-table th,
            .comparison-table td {
                padding: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <div class="hero-badge">AI-Powered Legal Intake</div>
            <h1>See Your <span>AI Intake</span> in 60 Seconds</h1>
            <p class="hero-subtitle">
                PreIntake.ai screens leads like your best paralegal‚Äîbefore they hit your CRM.
                Practice-specific qualification for PI, Immigration, Family Law, Bankruptcy, and more.
            </p>
            <a href="#demo" class="hero-cta">
                Create Your Custom AI Intake Demo
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
                </svg>
            </a>
            <p class="hero-note">No credit card required. See a working demo with your branding.</p>
        </div>
    </section>

    <!-- Stats Bar -->
    <div class="stats-bar">
        <div class="stats-container">
            <div class="stat">
                <div class="stat-number">60-70%</div>
                <div class="stat-label">of intake submissions are unqualified</div>
            </div>
            <div class="stat">
                <div class="stat-number">$25-50</div>
                <div class="stat-label">cost per unqualified call in staff time</div>
            </div>
            <div class="stat">
                <div class="stat-number">45%</div>
                <div class="stat-label">of firms use 5-10+ fragmented tools</div>
            </div>
            <div class="stat">
                <div class="stat-number">24/7</div>
                <div class="stat-label">intake coverage without hiring staff</div>
            </div>
        </div>
    </div>

    <!-- Problem Section -->
    <section class="section section-dark">
        <div class="container">
            <div class="section-header">
                <h2>Generic Intake Tools Don't Work</h2>
                <p>Forms and chatbots flood your inbox. Your staff wastes hours on leads that never sign. Real cases slip through the cracks.</p>
            </div>
            <div class="problem-grid">
                <div class="problem-card">
                    <div class="problem-card-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                    </div>
                    <h3>No Legal Training</h3>
                    <p>Generic chatbots don't understand SOL deadlines, jurisdiction issues, or practice-specific disqualifiers.</p>
                </div>
                <div class="problem-card">
                    <div class="problem-card-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                        </svg>
                    </div>
                    <h3>Raw Data Dumps</h3>
                    <p>Form submissions give you data. They don't tell you if the case is worth pursuing or why.</p>
                </div>
                <div class="problem-card">
                    <div class="problem-card-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4" />
                        </svg>
                    </div>
                    <h3>Replace, Not Integrate</h3>
                    <p>Most intake tools try to replace your CRM. You end up with another system to manage.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Solution Section -->
    <section class="section">
        <div class="container">
            <div class="section-header">
                <h2>PreIntake.ai Is Different</h2>
                <p>We sit in front of your CRM‚ÄîLawmatics, Clio, Filevine‚Äîand make sure only real cases get there.</p>
            </div>
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Feature</th>
                        <th>Form Builders / CRMs</th>
                        <th>PreIntake.ai</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Intake Style</td>
                        <td>Static forms, fixed fields</td>
                        <td>Conversational AI that adapts</td>
                    </tr>
                    <tr>
                        <td>Screening</td>
                        <td>Generic lead scoring</td>
                        <td>Practice-specific legal screening</td>
                    </tr>
                    <tr>
                        <td>Disqualification</td>
                        <td>Manual review required</td>
                        <td>Instant (SOL, jurisdiction, conflicts)</td>
                    </tr>
                    <tr>
                        <td>Output</td>
                        <td>Raw form data</td>
                        <td>Routing + plain-English rationale</td>
                    </tr>
                    <tr>
                        <td>Integration</td>
                        <td>Replaces your system</td>
                        <td>Feeds INTO your existing CRM</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </section>

    <!-- Routing Section -->
    <section class="section section-dark">
        <div class="container">
            <div class="section-header">
                <h2>Intelligent Lead Routing</h2>
                <p>Every lead gets screened and routed automatically. Your staff only sees qualified cases.</p>
            </div>
            <div class="routing-grid">
                <div class="routing-card green">
                    <div class="routing-badge">GREEN</div>
                    <h3>Strong Case Indicators</h3>
                    <p>Clear liability, documented injuries, within SOL, no existing representation.</p>
                    <div class="routing-action">‚Üí Instant Calendar Booking</div>
                </div>
                <div class="routing-card yellow">
                    <div class="routing-badge">YELLOW</div>
                    <h3>Needs Documentation</h3>
                    <p>Promising case but missing key documents or unclear on certain facts.</p>
                    <div class="routing-action">‚Üí Queued for Records Review</div>
                </div>
                <div class="routing-card red">
                    <div class="routing-badge">RED</div>
                    <h3>Cannot Help</h3>
                    <p>Outside SOL, wrong jurisdiction, existing representation, or clear disqualifier.</p>
                    <div class="routing-action">‚Üí Polite Decline + Resources</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Practice Areas -->
    <section class="section">
        <div class="container">
            <div class="section-header">
                <h2>Practice-Specific Templates</h2>
                <p>Each practice area has its own screening logic, qualification criteria, and conversational flow.</p>
            </div>
            <div class="practice-grid">
                <div class="practice-card">
                    <h3><span>üöó</span> Personal Injury</h3>
                    <ul>
                        <li>Vehicle accidents (Car, Motorcycle, Truck)</li>
                        <li>Rideshare incidents (Uber/Lyft)</li>
                        <li>Premises liability, Dog bites</li>
                    </ul>
                    <div class="practice-card-screening">Screens: SOL, fault, injuries, insurance, representation</div>
                </div>
                <div class="practice-card">
                    <h3><span>üåé</span> Immigration</h3>
                    <ul>
                        <li>Family-based (spouse, parent, sibling)</li>
                        <li>Employment-based (H-1B, L-1, PERM)</li>
                        <li>Asylum, VAWA, U-visa</li>
                    </ul>
                    <div class="practice-card-screening">Screens: Visa status, timeline, bars, violations</div>
                </div>
                <div class="practice-card">
                    <h3><span>üë®‚Äçüë©‚Äçüëß</span> Family Law</h3>
                    <ul>
                        <li>Divorce (contested/uncontested)</li>
                        <li>Child custody and support</li>
                        <li>Protective orders</li>
                    </ul>
                    <div class="practice-card-screening">Screens: Jurisdiction, children, assets, urgency</div>
                </div>
                <div class="practice-card">
                    <h3><span>üí≥</span> Bankruptcy</h3>
                    <ul>
                        <li>Chapter 7 (liquidation)</li>
                        <li>Chapter 13 (reorganization)</li>
                        <li>Means test pre-qualification</li>
                    </ul>
                    <div class="practice-card-screening">Screens: Income, debt type, prior filings</div>
                </div>
                <div class="practice-card">
                    <h3><span>‚öñÔ∏è</span> Criminal Defense</h3>
                    <ul>
                        <li>Misdemeanor and felony defense</li>
                        <li>DUI/DWI</li>
                        <li>Federal crimes</li>
                    </ul>
                    <div class="practice-card-screening">Screens: Charges, court dates, bail, representation</div>
                </div>
                <div class="practice-card">
                    <h3><span>üìä</span> Tax Litigation</h3>
                    <ul>
                        <li>IRS disputes and audits</li>
                        <li>State tax agency conflicts</li>
                        <li>Offer in Compromise</li>
                    </ul>
                    <div class="practice-card-screening">Screens: Tax type, amount, procedural posture</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Demo CTA Section -->
    <section class="cta-section" id="demo">
        <div class="container">
            <h2>Create Your Custom AI Intake Demo</h2>
            <div class="demo-form-container" id="demo-form-container">
                <form class="demo-form" id="demo-form">
                    <div class="form-error" id="form-error"></div>
                    <!-- Honeypot field - hidden from humans, bots will fill it -->
                    <div class="hp-field" aria-hidden="true">
                        <label for="company_fax">Fax Number</label>
                        <input type="text" id="company_fax" name="company_fax" tabindex="-1" autocomplete="off">
                    </div>
                    <div class="form-group">
                        <label for="name">Your Name</label>
                        <input type="text" id="name" name="name" placeholder="Jane Smith" required>
                    </div>
                    <div class="form-group">
                        <label for="email">Email Address</label>
                        <input type="email" id="email" name="email" placeholder="jane@smithlaw.com" required>
                    </div>
                    <div class="form-group">
                        <label for="website">Firm Website</label>
                        <input type="url" id="website" name="website" placeholder="https://smithlaw.com" required>
                    </div>

                    <!-- Practice Area Breakdown -->
                    <div class="practice-selector">
                        <div class="practice-selector-header">
                            <span class="practice-selector-title">Practice Area Breakdown</span>
                            <span class="practice-total zero" id="practice-total">0%</span>
                        </div>
                        <div class="practice-grid" id="practice-grid">
                            <div class="practice-row" data-area="personal_injury">
                                <label class="practice-label">Personal Injury</label>
                                <select class="practice-select" name="practice_personal_injury">
                                    <option value="0">0%</option>
                                    <option value="5">5%</option>
                                    <option value="10">10%</option>
                                    <option value="15">15%</option>
                                    <option value="20">20%</option>
                                    <option value="25">25%</option>
                                    <option value="30">30%</option>
                                    <option value="35">35%</option>
                                    <option value="40">40%</option>
                                    <option value="45">45%</option>
                                    <option value="50">50%</option>
                                    <option value="55">55%</option>
                                    <option value="60">60%</option>
                                    <option value="65">65%</option>
                                    <option value="70">70%</option>
                                    <option value="75">75%</option>
                                    <option value="80">80%</option>
                                    <option value="85">85%</option>
                                    <option value="90">90%</option>
                                    <option value="95">95%</option>
                                    <option value="100">100%</option>
                                </select>
                            </div>
                            <div class="practice-row" data-area="immigration">
                                <label class="practice-label">Immigration</label>
                                <select class="practice-select" name="practice_immigration">
                                    <option value="0">0%</option>
                                    <option value="5">5%</option>
                                    <option value="10">10%</option>
                                    <option value="15">15%</option>
                                    <option value="20">20%</option>
                                    <option value="25">25%</option>
                                    <option value="30">30%</option>
                                    <option value="35">35%</option>
                                    <option value="40">40%</option>
                                    <option value="45">45%</option>
                                    <option value="50">50%</option>
                                    <option value="55">55%</option>
                                    <option value="60">60%</option>
                                    <option value="65">65%</option>
                                    <option value="70">70%</option>
                                    <option value="75">75%</option>
                                    <option value="80">80%</option>
                                    <option value="85">85%</option>
                                    <option value="90">90%</option>
                                    <option value="95">95%</option>
                                    <option value="100">100%</option>
                                </select>
                            </div>
                            <div class="practice-row" data-area="family_law">
                                <label class="practice-label">Family Law</label>
                                <select class="practice-select" name="practice_family_law">
                                    <option value="0">0%</option>
                                    <option value="5">5%</option>
                                    <option value="10">10%</option>
                                    <option value="15">15%</option>
                                    <option value="20">20%</option>
                                    <option value="25">25%</option>
                                    <option value="30">30%</option>
                                    <option value="35">35%</option>
                                    <option value="40">40%</option>
                                    <option value="45">45%</option>
                                    <option value="50">50%</option>
                                    <option value="55">55%</option>
                                    <option value="60">60%</option>
                                    <option value="65">65%</option>
                                    <option value="70">70%</option>
                                    <option value="75">75%</option>
                                    <option value="80">80%</option>
                                    <option value="85">85%</option>
                                    <option value="90">90%</option>
                                    <option value="95">95%</option>
                                    <option value="100">100%</option>
                                </select>
                            </div>
                            <div class="practice-row" data-area="bankruptcy">
                                <label class="practice-label">Bankruptcy</label>
                                <select class="practice-select" name="practice_bankruptcy">
                                    <option value="0">0%</option>
                                    <option value="5">5%</option>
                                    <option value="10">10%</option>
                                    <option value="15">15%</option>
                                    <option value="20">20%</option>
                                    <option value="25">25%</option>
                                    <option value="30">30%</option>
                                    <option value="35">35%</option>
                                    <option value="40">40%</option>
                                    <option value="45">45%</option>
                                    <option value="50">50%</option>
                                    <option value="55">55%</option>
                                    <option value="60">60%</option>
                                    <option value="65">65%</option>
                                    <option value="70">70%</option>
                                    <option value="75">75%</option>
                                    <option value="80">80%</option>
                                    <option value="85">85%</option>
                                    <option value="90">90%</option>
                                    <option value="95">95%</option>
                                    <option value="100">100%</option>
                                </select>
                            </div>
                            <div class="practice-row" data-area="criminal_defense">
                                <label class="practice-label">Criminal Defense</label>
                                <select class="practice-select" name="practice_criminal_defense">
                                    <option value="0">0%</option>
                                    <option value="5">5%</option>
                                    <option value="10">10%</option>
                                    <option value="15">15%</option>
                                    <option value="20">20%</option>
                                    <option value="25">25%</option>
                                    <option value="30">30%</option>
                                    <option value="35">35%</option>
                                    <option value="40">40%</option>
                                    <option value="45">45%</option>
                                    <option value="50">50%</option>
                                    <option value="55">55%</option>
                                    <option value="60">60%</option>
                                    <option value="65">65%</option>
                                    <option value="70">70%</option>
                                    <option value="75">75%</option>
                                    <option value="80">80%</option>
                                    <option value="85">85%</option>
                                    <option value="90">90%</option>
                                    <option value="95">95%</option>
                                    <option value="100">100%</option>
                                </select>
                            </div>
                            <div class="practice-row" data-area="tax">
                                <label class="practice-label">Tax / IRS</label>
                                <select class="practice-select" name="practice_tax">
                                    <option value="0">0%</option>
                                    <option value="5">5%</option>
                                    <option value="10">10%</option>
                                    <option value="15">15%</option>
                                    <option value="20">20%</option>
                                    <option value="25">25%</option>
                                    <option value="30">30%</option>
                                    <option value="35">35%</option>
                                    <option value="40">40%</option>
                                    <option value="45">45%</option>
                                    <option value="50">50%</option>
                                    <option value="55">55%</option>
                                    <option value="60">60%</option>
                                    <option value="65">65%</option>
                                    <option value="70">70%</option>
                                    <option value="75">75%</option>
                                    <option value="80">80%</option>
                                    <option value="85">85%</option>
                                    <option value="90">90%</option>
                                    <option value="95">95%</option>
                                    <option value="100">100%</option>
                                </select>
                            </div>
                            <div class="practice-row" data-area="estate_planning">
                                <label class="practice-label">Estate Planning</label>
                                <select class="practice-select" name="practice_estate_planning">
                                    <option value="0">0%</option>
                                    <option value="5">5%</option>
                                    <option value="10">10%</option>
                                    <option value="15">15%</option>
                                    <option value="20">20%</option>
                                    <option value="25">25%</option>
                                    <option value="30">30%</option>
                                    <option value="35">35%</option>
                                    <option value="40">40%</option>
                                    <option value="45">45%</option>
                                    <option value="50">50%</option>
                                    <option value="55">55%</option>
                                    <option value="60">60%</option>
                                    <option value="65">65%</option>
                                    <option value="70">70%</option>
                                    <option value="75">75%</option>
                                    <option value="80">80%</option>
                                    <option value="85">85%</option>
                                    <option value="90">90%</option>
                                    <option value="95">95%</option>
                                    <option value="100">100%</option>
                                </select>
                            </div>
                            <div class="practice-row" data-area="employment">
                                <label class="practice-label">Employment Law</label>
                                <select class="practice-select" name="practice_employment">
                                    <option value="0">0%</option>
                                    <option value="5">5%</option>
                                    <option value="10">10%</option>
                                    <option value="15">15%</option>
                                    <option value="20">20%</option>
                                    <option value="25">25%</option>
                                    <option value="30">30%</option>
                                    <option value="35">35%</option>
                                    <option value="40">40%</option>
                                    <option value="45">45%</option>
                                    <option value="50">50%</option>
                                    <option value="55">55%</option>
                                    <option value="60">60%</option>
                                    <option value="65">65%</option>
                                    <option value="70">70%</option>
                                    <option value="75">75%</option>
                                    <option value="80">80%</option>
                                    <option value="85">85%</option>
                                    <option value="90">90%</option>
                                    <option value="95">95%</option>
                                    <option value="100">100%</option>
                                </select>
                            </div>
                            <div class="practice-row" data-area="workers_comp">
                                <label class="practice-label">Workers' Comp</label>
                                <select class="practice-select" name="practice_workers_comp">
                                    <option value="0">0%</option>
                                    <option value="5">5%</option>
                                    <option value="10">10%</option>
                                    <option value="15">15%</option>
                                    <option value="20">20%</option>
                                    <option value="25">25%</option>
                                    <option value="30">30%</option>
                                    <option value="35">35%</option>
                                    <option value="40">40%</option>
                                    <option value="45">45%</option>
                                    <option value="50">50%</option>
                                    <option value="55">55%</option>
                                    <option value="60">60%</option>
                                    <option value="65">65%</option>
                                    <option value="70">70%</option>
                                    <option value="75">75%</option>
                                    <option value="80">80%</option>
                                    <option value="85">85%</option>
                                    <option value="90">90%</option>
                                    <option value="95">95%</option>
                                    <option value="100">100%</option>
                                </select>
                            </div>
                            <div class="practice-row" data-area="real_estate">
                                <label class="practice-label">Real Estate</label>
                                <select class="practice-select" name="practice_real_estate">
                                    <option value="0">0%</option>
                                    <option value="5">5%</option>
                                    <option value="10">10%</option>
                                    <option value="15">15%</option>
                                    <option value="20">20%</option>
                                    <option value="25">25%</option>
                                    <option value="30">30%</option>
                                    <option value="35">35%</option>
                                    <option value="40">40%</option>
                                    <option value="45">45%</option>
                                    <option value="50">50%</option>
                                    <option value="55">55%</option>
                                    <option value="60">60%</option>
                                    <option value="65">65%</option>
                                    <option value="70">70%</option>
                                    <option value="75">75%</option>
                                    <option value="80">80%</option>
                                    <option value="85">85%</option>
                                    <option value="90">90%</option>
                                    <option value="95">95%</option>
                                    <option value="100">100%</option>
                                </select>
                            </div>
                            <div class="practice-row practice-row-other" data-area="other">
                                <div class="practice-other-input-wrapper">
                                    <span class="practice-other-icon">üìÅ</span>
                                    <input type="text" class="practice-other-input" id="other-practice-name" placeholder="Other (specify)" maxlength="50">
                                </div>
                                <select class="practice-select" name="practice_other">
                                    <option value="0">0%</option>
                                    <option value="5">5%</option>
                                    <option value="10">10%</option>
                                    <option value="15">15%</option>
                                    <option value="20">20%</option>
                                    <option value="25">25%</option>
                                    <option value="30">30%</option>
                                    <option value="35">35%</option>
                                    <option value="40">40%</option>
                                    <option value="45">45%</option>
                                    <option value="50">50%</option>
                                    <option value="55">55%</option>
                                    <option value="60">60%</option>
                                    <option value="65">65%</option>
                                    <option value="70">70%</option>
                                    <option value="75">75%</option>
                                    <option value="80">80%</option>
                                    <option value="85">85%</option>
                                    <option value="90">90%</option>
                                    <option value="95">95%</option>
                                    <option value="100">100%</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <button type="submit" class="demo-submit" id="submit-btn">Create Customized Demo</button>
                </form>
            </div>

            <!-- Success state (hidden by default) -->
            <div class="demo-form-container demo-success" id="demo-success" style="display: none;">
                <div class="demo-success-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                    </svg>
                </div>
                <h3>Your Intake Demo Is Being Built</h3>
                <p>We're analyzing your firm's website, practice mix, and intake signals to assemble a working AI intake tailored to how your firm evaluates new matters.</p>
                <p class="check-email">You'll receive an email in a few minutes with a private link to review your demo.</p>
                <p>The demo shows how leads are screened, routed, or declined before reaching your CRM‚Äîbased on real disqualifiers, not generic form logic.</p>
                <p style="font-size: 0.85rem; margin-top: 1rem; color: var(--text-muted);">No installation. No CRM changes. This demo runs independently.</p>
                <p style="font-size: 0.85rem; color: var(--text-muted);">Most demos are ready in under 5 minutes, depending on site complexity.</p>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="footer-links">
            <a href="preintake.md">Documentation</a>
            <a href="mailto:support@preintake.ai">Contact</a>
        </div>
        <p>&copy; 2025 PreIntake.ai. All rights reserved.</p>
        <p style="margin-top: 0.5rem; font-size: 0.8rem;">Built by <a href="https://stephenscott.us">Stephen Scott</a></p>
    </footer>

    <script>
        // Firebase Function endpoint
        const SUBMIT_ENDPOINT = 'https://us-west1-teambuilder-plus-fe74d.cloudfunctions.net/submitDemoRequest';

        // Rate limiting configuration
        const RATE_LIMIT_KEY = 'preintake_submissions';
        const MAX_SUBMISSIONS_PER_DAY = 3;

        // Check rate limit (client-side)
        function checkRateLimit() {
            try {
                const stored = localStorage.getItem(RATE_LIMIT_KEY);
                if (!stored) return { allowed: true, remaining: MAX_SUBMISSIONS_PER_DAY };

                const data = JSON.parse(stored);
                const today = new Date().toDateString();

                // Reset if different day
                if (data.date !== today) {
                    return { allowed: true, remaining: MAX_SUBMISSIONS_PER_DAY };
                }

                const remaining = MAX_SUBMISSIONS_PER_DAY - data.count;
                return { allowed: remaining > 0, remaining: Math.max(0, remaining) };
            } catch (e) {
                return { allowed: true, remaining: MAX_SUBMISSIONS_PER_DAY };
            }
        }

        // Record submission for rate limiting
        function recordSubmission() {
            try {
                const today = new Date().toDateString();
                const stored = localStorage.getItem(RATE_LIMIT_KEY);
                let data = stored ? JSON.parse(stored) : { date: today, count: 0 };

                if (data.date !== today) {
                    data = { date: today, count: 0 };
                }

                data.count++;
                localStorage.setItem(RATE_LIMIT_KEY, JSON.stringify(data));
            } catch (e) {
                // Silently fail if localStorage not available
            }
        }

        // Email validation function
        function isValidEmail(email) {
            // More robust email regex that checks:
            // - Has characters before @
            // - Has valid domain with at least one dot
            // - TLD is at least 2 characters
            // - No spaces or invalid characters
            const emailRegex = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$/;

            if (!emailRegex.test(email)) {
                return { valid: false, reason: 'Please enter a valid email address (e.g., jane@smithlaw.com)' };
            }

            // Check for common typos in popular domains
            const domain = email.split('@')[1].toLowerCase();
            const typoPatterns = [
                { pattern: /^g{1,2}mail\./, suggestion: 'gmail.com' },
                { pattern: /^gmial\./, suggestion: 'gmail.com' },
                { pattern: /^gmal\./, suggestion: 'gmail.com' },
                { pattern: /^gamil\./, suggestion: 'gmail.com' },
                { pattern: /^yahooo?\./, suggestion: 'yahoo.com' },
                { pattern: /^yaho\./, suggestion: 'yahoo.com' },
                { pattern: /^hotmai?l\./, suggestion: 'hotmail.com' },
                { pattern: /^outloo?k\./, suggestion: 'outlook.com' }
            ];

            for (const typo of typoPatterns) {
                if (typo.pattern.test(domain) && domain !== typo.suggestion) {
                    return { valid: false, reason: `Did you mean ${email.split('@')[0]}@${typo.suggestion}?` };
                }
            }

            // Check for obviously fake/test domains
            const fakeDomains = ['test.com', 'example.com', 'fake.com', 'asdf.com', 'aaa.com', 'abc.com'];
            if (fakeDomains.includes(domain)) {
                return { valid: false, reason: 'Please enter your actual business email address.' };
            }

            return { valid: true };
        }

        // Validate email domain matches website domain
        function validateEmailDomain(email, websiteUrl) {
            // Admin bypass
            const ADMIN_EMAILS = ['scscot@gmail.com'];
            if (ADMIN_EMAILS.includes(email.toLowerCase())) {
                return { valid: true };
            }

            try {
                // Extract email domain
                const emailDomain = email.split('@')[1].toLowerCase();

                // Extract website domain
                let url = websiteUrl.toLowerCase();
                if (!url.startsWith('http://') && !url.startsWith('https://')) {
                    url = 'https://' + url;
                }
                const urlObj = new URL(url);
                let websiteDomain = urlObj.hostname;

                // Remove www. prefix if present
                if (websiteDomain.startsWith('www.')) {
                    websiteDomain = websiteDomain.substring(4);
                }

                // Get base domain (last 2 parts) for comparison
                // e.g., "intake.smithlaw.com" ‚Üí "smithlaw.com"
                const getBaseDomain = (domain) => {
                    const parts = domain.split('.');
                    if (parts.length >= 2) {
                        return parts.slice(-2).join('.');
                    }
                    return domain;
                };

                const emailBase = getBaseDomain(emailDomain);
                const websiteBase = getBaseDomain(websiteDomain);

                if (emailBase !== websiteBase) {
                    return {
                        valid: false,
                        reason: `Your email domain (${emailDomain}) must match your firm's website domain (${websiteDomain}). Please use your firm email address.`
                    };
                }

                return { valid: true };
            } catch (e) {
                // If URL parsing fails, skip this validation
                return { valid: true };
            }
        }

        // Practice area name mapping
        const PRACTICE_AREA_NAMES = {
            personal_injury: 'Personal Injury',
            immigration: 'Immigration',
            family_law: 'Family Law',
            bankruptcy: 'Bankruptcy',
            criminal_defense: 'Criminal Defense',
            tax: 'Tax',
            estate_planning: 'Estate Planning',
            employment: 'Employment Law',
            workers_comp: 'Workers\' Compensation',
            real_estate: 'Real Estate',
            other: 'Other'
        };

        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('demo-form');
            const formContainer = document.getElementById('demo-form-container');
            const successContainer = document.getElementById('demo-success');
            const submitBtn = document.getElementById('submit-btn');
            const errorDiv = document.getElementById('form-error');
            const practiceSelects = document.querySelectorAll('.practice-select');
            const practiceTotalEl = document.getElementById('practice-total');
            const practiceRows = document.querySelectorAll('.practice-row');

            // Update practice area totals and highlighting
            function updatePracticeAreas() {
                let total = 0;
                let maxValue = 0;
                let maxArea = null;

                // Calculate total and find primary
                practiceRows.forEach(row => {
                    const select = row.querySelector('.practice-select');
                    const value = parseInt(select.value) || 0;
                    total += value;

                    // Track highest percentage for primary
                    if (value > maxValue) {
                        maxValue = value;
                        maxArea = row;
                    }

                    // Update row styling
                    row.classList.remove('active', 'primary');
                    if (value > 0) {
                        row.classList.add('active');
                    }
                });

                // Mark primary (highest %)
                if (maxArea && maxValue > 0) {
                    maxArea.classList.add('primary');
                }

                // Update total display
                practiceTotalEl.textContent = total + '%';
                practiceTotalEl.classList.remove('valid', 'invalid', 'zero');
                if (total === 0) {
                    practiceTotalEl.classList.add('zero');
                } else if (total === 100) {
                    practiceTotalEl.classList.add('valid');
                } else {
                    practiceTotalEl.classList.add('invalid');
                }

                return { total, maxValue, maxArea };
            }

            // Get practice areas data for submission
            function getPracticeAreasData() {
                const practiceAreas = {};
                let primaryArea = null;
                let maxValue = 0;
                const otherNameInput = document.getElementById('other-practice-name');
                const otherName = otherNameInput ? otherNameInput.value.trim() : '';

                practiceRows.forEach(row => {
                    const area = row.dataset.area;
                    const select = row.querySelector('.practice-select');
                    const value = parseInt(select.value) || 0;

                    if (value > 0) {
                        practiceAreas[area] = value;
                        if (value > maxValue) {
                            maxValue = value;
                            primaryArea = area;
                        }
                    }
                });

                // Determine primary area name, using custom name for "other"
                let primaryAreaName = null;
                if (primaryArea) {
                    if (primaryArea === 'other' && otherName) {
                        primaryAreaName = otherName;
                    } else {
                        primaryAreaName = PRACTICE_AREA_NAMES[primaryArea] || primaryArea;
                    }
                }

                return {
                    breakdown: practiceAreas,
                    primaryArea: primaryArea,
                    primaryAreaName: primaryAreaName,
                    otherName: otherName || null  // Include custom "Other" name
                };
            }

            // Add change listeners to all practice selects
            practiceSelects.forEach(select => {
                select.addEventListener('change', updatePracticeAreas);
            });

            // Initialize
            updatePracticeAreas();

            form.addEventListener('submit', async function(e) {
                e.preventDefault();

                // Hide any previous errors
                errorDiv.classList.remove('show');

                // Check honeypot - if filled, silently reject (bot)
                const honeypot = document.getElementById('company_fax').value;
                if (honeypot) {
                    // Pretend success to bots
                    formContainer.style.display = 'none';
                    successContainer.style.display = 'block';
                    return;
                }

                // Get form values
                const name = document.getElementById('name').value.trim();
                const email = document.getElementById('email').value.trim();
                const website = document.getElementById('website').value.trim();

                // Admin bypass for rate limiting
                const ADMIN_EMAILS = ['scscot@gmail.com'];
                const isAdmin = ADMIN_EMAILS.includes(email.toLowerCase());

                // Check client-side rate limit (skip for admins)
                if (!isAdmin) {
                    const rateCheck = checkRateLimit();
                    if (!rateCheck.allowed) {
                        showError('Too many requests. Please try again tomorrow.');
                        return;
                    }
                }

                // Basic validation
                if (!name || !email || !website) {
                    showError('Please fill in all fields.');
                    return;
                }

                // Validate email format
                const emailInput = document.getElementById('email');
                const emailValidation = isValidEmail(email);
                if (!emailValidation.valid) {
                    showError(emailValidation.reason);
                    emailInput.focus();
                    emailInput.select();
                    return;
                }

                // Validate email domain matches website domain
                const domainValidation = validateEmailDomain(email, website);
                if (!domainValidation.valid) {
                    showError(domainValidation.reason);
                    emailInput.focus();
                    emailInput.select();
                    return;
                }

                // Validate practice areas total equals 100%
                const { total } = updatePracticeAreas();
                if (total !== 100) {
                    showError('Practice area percentages must total 100%. Currently: ' + total + '%');
                    return;
                }

                // Get practice areas data
                const practiceAreasData = getPracticeAreasData();

                // Validate: if "Other" has a percentage, a name must be provided
                const otherPercentage = practiceAreasData.breakdown.other || 0;
                const otherNameInput = document.getElementById('other-practice-name');
                if (otherPercentage > 0 && !practiceAreasData.otherName) {
                    showError('Please specify your "Other" practice area name.');
                    if (otherNameInput) {
                        otherNameInput.classList.add('required');
                        otherNameInput.focus();
                        setTimeout(() => otherNameInput.classList.remove('required'), 1000);
                    }
                    return;
                }

                // Show loading state
                submitBtn.disabled = true;
                submitBtn.classList.add('loading');

                try {
                    const response = await fetch(SUBMIT_ENDPOINT, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            name,
                            email,
                            website,
                            practiceAreas: practiceAreasData
                        })
                    });

                    const data = await response.json();

                    if (!response.ok) {
                        // Handle field-specific errors
                        if (data.field === 'email') {
                            const emailInput = document.getElementById('email');
                            emailInput.focus();
                            emailInput.select();
                        }
                        throw new Error(data.error || 'Something went wrong. Please try again.');
                    }

                    // Record successful submission for rate limiting
                    recordSubmission();

                    // Success - show success state
                    formContainer.style.display = 'none';
                    successContainer.style.display = 'block';

                } catch (error) {
                    showError(error.message || 'Something went wrong. Please try again.');
                    submitBtn.disabled = false;
                    submitBtn.classList.remove('loading');
                }
            });

            function showError(message) {
                errorDiv.textContent = message;
                errorDiv.classList.add('show');
            }
        });
    </script>
</body>
</html>
